!function(e,t){"use strict";function i(e){e=e||t("body"),this.target=e,this.isOpened=!1}i.prototype.open=function(e){e=e||(this.target?this.target:t("body")),this.isOpened&&this.close(),this.element=t("<div/>").addClass("common-loading-panel-mask"),this.loadingImage=t("<div/>").addClass("common-loading-panel-image"),this.loadingColor=t("<div/>").addClass("common-loading-panel-color"),this.element.append(this.loadingImage).append(this.loadingColor),this.element.appendTo(e),this.isOpened=!0},i.prototype.close=function(){this.element&&this.element.remove(),this.isOpened=!1},e.CommonLoadingPanel=i,define("widget/common-loading-panel",function(){return i})}(window,jQuery),function(v,B){"use strict";var y=v.kendo,e=y.template,h=B.proxy,M=v.Util,c=y.keys,f={wrapper:e("<div class='k-widget k-dialog k-window' role='dialog' />"),action:e("<button type='button' class='k-button# if (data.primary) { # k-primary# } role='button' #'></button>"),titlebar:e("<div class='k-window-titlebar k-dialog-titlebar k-header'><span class='k-window-title k-dialog-title'>#= title #</span></div>"),close:e("<a role='button' href='\\#' class='k-button-bare k-dialog-action k-dialog-close' title='#= messages.close #' aria-label='#= messages.close #' tabindex='-1'><span class='k-icon k-i-close'></span></a>"),actionbar:e("<div class='k-dialog-buttongroup k-dialog-button-layout-#= buttonLayout #' role='toolbar' />"),overlay:"<div class='k-overlay' />",alertWrapper:e("<div class='k-widget k-dialog k-window' role='alertdialog' />"),alert:"<div />",confirm:"<div />",prompt:"<div />",promptInputContainer:"<div class='k-prompt-container'><input type='text' class='k-textbox' /></div>"},g=y.ui.Dialog,t=g.extend({options:{name:"CommonDialog",type:"message",animation:!1,closable:!1,visible:!1,timeout:5e3,saveOnlyVisibleField:!1,replaceNewLine:!0,enableSaveBtnOnInputChange:!0,invalidScrollFieldClass:".detail-dialog-content-field-item",invalidScrollWrapperClass:".detail-dialog-detail-content",invalidScrollFieldListClass:".detail-dialog-detail-content-field-list",message:"",templates:{contBox:"<div class='pop-confirm-contbox'></div>",imgBox:"<div class='pop-confirm-imgbox'><span class='pop-confirm-img'></span></div>",detailBox:"<div class='pop-confirm-detailbox'></div>"},width:"560px",height:"250px",title:"COMMON_DIALOG_NOTIFICATION",confirmActions:{yes:null,no:null},closeAction:null,typeActions:{message:[{text:"COMMON_DIALOG_BUTTON_OK",action:function(e){e.sender.close()}}],confirm:[{text:"COMMON_DIALOG_BUTTON_NO",action:function(e){e.sender.close()}},{text:"COMMON_DIALOG_BUTTON_YES",action:function(e){e.sender.close()}}]}},init:function(e,t){var i,a,n,o=this,s=v.I18N,l=o.options.title;"COMMON_DIALOG_NOTIFICATION"==l&&(o.options.title=s.prop(l));var r=o.options.typeActions,u=r.message[0].text;"COMMON_DIALOG_BUTTON_OK"==u&&(r.message[0].text=s.prop(u)),"COMMON_DIALOG_BUTTON_NO"==(u=r.confirm[0].text)&&(r.confirm[0].text=s.prop(u)),"COMMON_DIALOG_BUTTON_YES"==(u=r.confirm[1].text)&&(r.confirm[1].text=s.prop(u)),t=B.extend({},o.options,t);var d=B(t.templates.contBox),c=B(t.templates.detailBox);d.append(c),!t.message&&""!=t.message||(t.replaceNewLine&&t.message&&(t.message=t.message.replace(/\n/g,"<br />")),i=B("<p/>").addClass("pop-confirm-message").html(t.message),c.append(i)),t.content&&c.html(t.content);var p=B(e).children();0<p.length&&d.append(p),t.content=d,n=t.type,(!t.actions||t.actions.length<1)&&(t.actions=t.typeActions[n]),a=t.confirmActions,"confirm"==n&&(a.yes&&B.isFunction(a.yes)?t.actions[1].action=function(e){var t=e.sender.options,i=!0;if(t.confirmActions&&t.confirmActions.yes&&(i=t.confirmActions.yes.call(this,e)),!1===i)return!1;e.sender.close()}:a.yes=t.actions[1].action,a.no&&B.isFunction(a.no)?t.actions[0].action=function(e){var t=e.sender.options,i=!0;if(t.confirmActions&&t.confirmActions.no&&(i=t.confirmActions.no.call(this,e)),!1===i)return!1;e.sender.close()}:a.no=t.actions[0].action),g.fn.init.call(o,e,t);var m=B(o.wrapper);m.addClass("pop-confirm"),m.find(".k-dialog-title").text(o.options.title);var h=B("<span class='pop-confirm-btn-close ic ic-close'></span>");m.append(h),this.closeBtn=h,t.closeAction?h.on("click",t.closeAction.bind(o,{sender:o})):"confirm"==n?h.on("click",t.actions[0].action.bind(o,{sender:o})):h.on("click",this.closeBtnEvt.bind(o,{sender:o})),o.messageBox=B(o.element).find(".pop-confirm-message"),o.messageBox.css("margin-left","4px"),o.wrapper.on("keydown",o._keyHandler.bind(o))},_keyHandler:function(e){var t=this,i=e.keyCode,a=t.options;i==c.ESC?t.closeBtn.trigger("click"):i==c.ENTER&&("confirm"==a.type?t.options.actions[1].action.call(t,{sender:t}):"message"==a.type&&t.options.actions[0].action.call(t,{sender:t}))},open:function(){g.fn.open.call(this);var e=this.options;if("message"==e.type&&e.timeout){var t=this;t.timeout=setTimeout(function(){t.close()},e.timeout)}},close:function(){g.fn.close.call(this),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_createActionbar:function(e){var t="stretched"===this.options.buttonLayout,i=t?"stretched":"normal",a=B(f.actionbar({buttonLayout:i}));this._addButtons(a),t&&this._normalizeButtonSize(a),e.append(a)},_addButtons:function(e){var t,i,a,n,o=this,s=o.options,l=h(o._actionClick,o),r=h(o._actionKeyHandler,o),u=o.options.actions,d=u.length,c=100/d;o.buttons=[];for(var p=0;p<d;p++)if(t=u[p]){a=t.disabled,n=t.visible,i=o._mergeTextWithOptions(t);var m=B(f.action(t)).autoApplyNS("kendoWindow").html(i).appendTo(e).data("action",t.action).on("click",l).on("keydown",r).prop("disabled",a);o.buttons.push(m),!0===n?m.show():!1===n&&m.hide(),"stretched"===s.buttonLayout&&m.css("width",c+"%")}else o.buttons.push(null)},message:function(e){return this.options.replaceNewLine&&e&&(e=e.replace(/\n/g,"<br />")),this.messageBox.html(e)},setActions:function(e,t){var i;(i=this.buttons[e])?(t.action&&i.data("action",t.action),t.text&&i.text(this._mergeTextWithOptions(t)),!0===t.visible?i.show():!1===t.visible&&i.hide(),void 0!==t.disabled&&i.prop("disabled",t.disabled)):console.info("there is no button for index "+e)},setConfirmActions:function(e){"confirm"==this.options.type?B.extend(this.options.confirmActions,e):console.error("this is not confirm type popup.")},setCloseAction:function(e){var t=this.options;t.closeAction=e;var i=t.type;this.closeBtn.off(),e?this.closeBtn.on("click",t.closeAction.bind(this,{sender:this})):"confirm"==i?this.closeBtn.on("click",t.actions[0].action.bind(this,{sender:this})):this.closeBtn.on("click",this.closeBtnEvt.bind(this,{sender:this}))},closeBtnEvt:function(){this.close()},destroy:function(){g.fn.destroy.call(this)}});y.ui.plugin(t);var N=v.moment,n=y.ui.CommonDialog;t=n.extend({options:{name:"DetailDialog",type:"single",listTemplate:"",hasDetail:!0,NotAllowedBlankFields:["mobilePhoneNumber","email"],timeout:0,dataSource:[],contentViewModel:null,buttonsIndex:{SAVE:0,EDIT:1,CANCEL:2,DELETE:3,CLOSE:4},initialCollapse:!0,parseSaveData:null,setAdditionalDetailData:null,events:["onSave","onSaved","onEdit","onEdited","onClose","onClosed","onDelete","onDeleted","onCancel","onCanceled","onRegister","onDeregister","onDelete","onBlock","onChangeButtons","onChecked","beforeSetDetailData","afterSetDetailData","collapse","expand"]},init:function(e,t){var i=this;t.buttonsIndex&&(i.options.buttonsIndex=B.extend({},t.buttonsIndex)),this._createDefaultActions(t),n.fn.init.call(i,e,t),this.BTN=B.extend({},i.options.buttonsIndex),this._createDataSource(i.options.dataSource);var a=i.element.find(".detail-dialog-content");0<a.length?(i.content(a),i._createContent()):i.content(i._createContent()),i.confirmDialog=B("<div/>").kendoCommonDialog({type:"confirm"}).data("kendoCommonDialog"),i.msgDialog=B("<div/>").kendoCommonDialog().data("kendoCommonDialog"),i.setCloseAction(function(){i._cancelEvent({sender:i},!0)})},_keyHandler:function(e){var t=this,i=e.keyCode,a=t.options,n=t.buttons;if(i==c.ESC)return t.closeBtn.trigger("click"),!1;if(i==c.ENTER){var o=t.BTN.SAVE,s=n[o],l=a.actions[o]?a.actions[o]:{},r=s?s.is(":visible"):l.visible,u=s?s.data("action"):l.action,d=t.buttons[o].prop("disabled");return void 0!==o&&u&&!d&&r&&u.call(t,{sender:t}),!1}},_defaultCancelEvent:function(e){e.sender.trigger("onCancel"),e.sender.cancel(),e.sender.isEditable&&e.sender.setEditable(!1),e.sender.hideInvalidMessage(),e.sender.hideRemoveBtn(),e.sender.trigger("onCanceled")},_cancelEvent:function(e,t){var i=v.I18N;if(e.sender.hasChanged)e.sender.confirmDialog.message(i.prop("COMMON_CONFIRM_DIALOG_EDIT_CANEL")),e.sender.confirmDialog.setConfirmActions({yes:function(){e.sender._defaultCancelEvent(e),t&&(e.sender.close(),e.sender.trigger("onClosed"))}}),e.sender.confirmDialog.open();else{try{e.sender._defaultCancelEvent(e)}catch(e){console.error("Common Detail Dialog default cancel event exception")}t&&(e.sender.close(),e.sender.trigger("onClosed"))}return!1},_createDefaultActions:function(e){var t=v.I18N,i=[{text:t.prop("COMMON_BTN_SAVE"),visible:!1,disabled:!0,action:function(e){e.sender.trigger("onSave");var t=e.sender.save();return t&&(e.sender.trigger("onSaved",{sender:e.sender,result:t}),e.sender.setEditable(!1)),!1}},{text:t.prop("COMMON_BTN_EDIT"),action:function(e){return e.sender.trigger("onEdit"),e.sender.setEditable(!0),e.sender.trigger("onEdited"),!1}},{text:t.prop("COMMON_BTN_CANCEL"),visible:!1,action:this._cancelEvent},{text:t.prop("COMMON_BTN_DELETE"),action:function(e){var t=e.sender.getSelectedData();return e.sender.trigger("onDelete",t),!1}},{text:t.prop("COMMON_BTN_CLOSE"),visible:!0,action:function(e){e.sender.trigger("onClose"),e.sender.isEditable&&e.sender.setEditable(!1),e.sender.trigger("onClosed")}}];if(0==e.hasDelete&&(i[3]=null),e.actions)if(e.isCustomActions)i=e.actions;else{var a,n=e.actions.length;for(a=0;a<n;a++)i.push(e.actions[a])}this.options.actions=e.actions=i},_createContent:function(){var a=this,e=a.options.contentTemplate;e&&a.element.html(e);var t,i,n,o,s,l=a.element.find(".detail-dialog-content");t=0<l.length?l:B("<div/>").addClass("detail-dialog-content"),this.contentElem=t;var r,u,d=this.options.isOnlyMulti;if(this.selectedIndex=0,this.virtualization=!1,this.dataSource.total()<=1&&!d){this.contentElem.removeClass("multi"),this.grid&&(this.gridElem.remove(),this.grid=null,this.gridElem=null),a._renderHeaderTemplate(),o=this.detailHeaderElem,a._createSingleDetailContentTemplate(),s=this.detailContent,t.has(o).length<1&&t.append(o),t.has(s).length<1&&t.append(s);var c=this.options.setAdditionalDetailData,p=[];if(c&&B.isFunction(c)){var m=this.getSelectedData();if(m){var h=c.call(this,m);h.promise&&p.push(h)}}B.when.apply(this,p).always(function(){a._setSingleDetailData()})}else{this.contentElem.addClass("multi");var f,v,g=a.options.groupListOptions,C=this.dataSource,A=a.element.find(".detail-dialog-header");if(g){var D=B("<div/>").addClass("detail-dialog-group-list");(i=a.options.headerTemplate)&&(i=(i=y.template(i))({count:a.dataSource.total()}),A.html(i)),this.detailHeader=A,g.height="calc(100% - 60px)",this.groupList=D.kendoDeviceTabGroupGrid(g).data("kendoDeviceTabGroupGrid"),r=(r=C.data()).toJSON(),(u=new y.data.DataSource({data:r,pageSize:C.pageSize()})).read(),this.groupList.setDataSource(u),t.append(D)}else{var b=B("<div/>").addClass("detail-dialog-grid");f=a.options.hasDetail;var F,O=a.options.gridOptions;O?(F=O.columns,O.scrollable&&O.scrollable.virtual&&(this.contentElem.addClass("virtualization"),this.virtualization=!0)):O={},i=a.options.headerTemplate,n=a.options.listTemplate,i=(i=y.template(i))({count:a.dataSource.total()}),this.gridElem=b,r=(r=C.data()).toJSON(),v=C.pageSize();var _={dataSource:u=new y.data.DataSource({data:r,pageSize:v}),height:"100%",selectable:"row",scrollable:!0,sortable:!1,filterable:!1,pageable:!1,dataBinding:function(e){a.detailContent&&a.detailContent.is(":visible")&&(this.hasDetailContent=!0,a.detailContent.detach())},dataBound:function(e){if(this.hasDetailContent){var t=this.dataSource.at(a.selectedIndex),i=this.element.find("tr[data-uid='"+t.uid+"']");i.length&&(i.after(a.detailContent),this.hasDetailContent=!1,a.isCollapse&&i.addClass("k-state-selected"))}}};if(F&&0<F.length){this.contentElem.addClass("multi-column");var E,M=F[F.length-1];this.lastColumnTempl||(E=M.template,this.lastColumnTempl=E),(E=this.lastColumnTempl)&&(M.template=a._addCollapseInTemplate(E)),A.html(i),this.detailHeader=A,_.height="calc(100% - 60px)"}else F=[],n=a._addCollapseInTemplate(n),F.push({headerTemplate:i,template:n}),_.columns=F,A.hide();B.extend(_,O),this.grid=b.kendoGrid(_).data("kendoGrid");var N=r.length;if(0<N){if(this.virtualization&&v){var I=b.find(".k-scrollbar.k-scrollbar-vertical");N<v?I.hide():I.show()}this.options.initialCollapse&&(this.grid.select("tr:first-child"),this.collapseRow(0,null,null,0))}t.append(b),this._attachCheckedEvt()}var x=a.options.headerViewModel;f?this._attachCollapseEvt():x&&(this.headerViewModel=y.observable(x),this.detailHeader&&(this._unbindDetailContent(this.detailHeader),y.bind(this.detailHeader,this.headerViewModel)))}return this._attachChangeEvt(),t},_addCollapseInTemplate:function(i){var a=this.options.hasDetail;return B.isFunction(i)?function(e){var t=i(e);return t="<div class='detail-dialog-header detail-multi-dialog-header'>"+t+(a?"<i class='detail-dialog-multi-header-collapse'></i>":"")+"</div>"}:i="<div class='detail-dialog-header detail-multi-dialog-header'>"+i+(a?"<i class='detail-dialog-multi-header-collapse'></i>":"")+"</div>"},_attachCheckedEvt:function(){var t=this;t.grid.bind("checked",function(e){t.trigger("onChecked",e)})},_attachCollapseEvt:function(){var s=this;this.grid.bind("change",function(e){var t,i,a=this.select();if(!(0<a.length))return s.detailContent.slideUp(300),void(s.isCollapse=!1);var n=this.options.selectable;if(n=-1!=n.indexOf("multiple")){if(i=e.item){if(!i.selected)return s.detailContent.slideUp(300),void(s.isCollapse=!1);B(a).each(function(){if(B(this).data("uid")==i.uid)return t=this,!1})}}else t=a[0],i=this.dataItem(t);console.info(i);var o=this.dataSource.indexOf(i);console.info(o),s.collapseRow(o,i,t)})},collapseRow:function(e,t,i,a){if(this.options.hasDetail){if(t=t||this.grid.dataSource.at(e),!i){var n=t.uid;i=this.grid.element.find("tr[data-uid='"+n+"']")}if(t){this.isEditable&&this.save(!0);var o=this.detailContent;o&&(this._unbindDetailContent(o),o.is(":visible")?(this.trigger("collapse"),o.slideUp(300,function(){o.remove()}),this.isCollapse=!1):o.remove()),this.selectedIndex=e,this._createSingleDetailContentTemplate();var s=this.options.setAdditionalDetailData,l=[];if(s&&B.isFunction(s)){var r=this.getSelectedData();if(r){var u=s.call(this,r);u.promise&&l.push(u)}}var d=this;B.when.apply(this,l).always(function(){d._setSingleDetailData(!0),d.detailContent.hide(),d.isEditable&&d.setContentEditable(d.isEditable),0<B(i).length&&(d.updateDetailContentWidth(),B(i).after(d.detailContent),void 0!==a?d.detailContent.slideDown(a):d.detailContent.slideDown(300),d.isCollapse=!0,d.trigger("expand"))})}}},_getDetailContentWidth:function(){var e=0;return this.grid&&(e=B(this.grid.element).width(),this.grid.options.scrollable&&this.grid.options.scrollable.virtual&&(e-=16)),0==e&&(e=this.contentElem.width()),e},_unbindDetailContent:function(e){y.unbind(e)},_unbindFields:function(){var e,t=this.editFields;if(t)for(e in t)y.unbind(t[e]);if(t=this.displayFields)for(e in t)y.unbind(t[e])},_renderHeaderTemplate:function(){var e,t,i=this.options.headerTemplate,a=this.options.listTemplate,n=this.dataSource.total(),o=this.selectedIndex,s=this.dataSource.at(o);n<=1&&a&&(i=a),e=0<(t=this.element.find(".detail-dialog-header")).length?t:B("<div/>").addClass("detail-dialog-header");var l="";i&&(B.isFunction(i)?s&&(l=i(s),e.html(l)):(s&&(l=(l=y.template(i))(s)),e.html(l)),this.detailHeaderElem=e,this.detailHeaderHtml=e.get(0).outerHTML)},_renderListTemplate:function(){var e,t,i=this.options.listTemplate,a=this.selectedIndex,n=this.dataSource.at(a),o="";e=B("<div/>").addClass("detail-dialog-multi-header"),t=B("<i/>").addClass("detail-dialog-multi-header-collapse"),i&&(B.isFunction(i)?n&&(o=i(n),e.html(o),e.append(t)):(n&&(o=(o=y.template(i))(n)),e.html(o),e.append(t)),this.detailListHeaderElem=e,this.detailListHeaderHtml=e.get(0).outerHTML)},_createDataSource:function(e){var t,i,a=this.options.virtualization,n=v.GlobalSettings;if(this.updatedItems=[],e instanceof y.data.DataSource){var o=e.data();t=e.pageSize(),i=this._createScheme(),this.options.dataSource=new y.data.DataSource({data:o,pageSize:t,schema:i})}else B.isArray(e)||(e=[e]),t=n.getPageSize()?n.getPageSize():20,t=a?t:void 0,console.info(e),i=this._createScheme(),this.options.dataSource=new y.data.DataSource({data:e,pageSize:t,schema:i});this.dataSource=this.options.dataSource,this.dataSource.read()},_createScheme:function(){var e=this.options.scheme;if(e){var t={model:{}},i=t.model;i.id=e.id,i.fields={};var a,n,o,s,l=e.fields;for(a in l)o=(n=l[a]).type,s=n.name,o="email"==o?"string":"datetime"==o?"date":"object",i.fields[a]={type:o,name:s};return t}},setDataSource:function(e){this._createDataSource(e),this.detailContent||this._createSingleDetailContentTemplate();var t=this.element.find(".detail-dialog-content");0<t.length?(this.content(t),this._createContent()):this.content(this._createContent())},_createSingleDetailContentTemplate:function(){if(this.options.hasDetail){var e,t=this.element.find(".detail-dialog-detail-content"),i=this.dataSource.total();e=0<t.length&&i<2?t:B("<div/>").addClass("detail-dialog-detail-content");var a=this.options.detailContentTemplate;a&&e.html(a);var n,o,s=e.find(".detail-dialog-detail-content-field-list"),l=!1;0<s.length?(l=!0,(n=s).empty()):n=B("<ul/>").addClass("detail-dialog-detail-content-field-list");var r=this.options.scheme;if(r){var u,d=r.fields;this.displayFields={},this.editFields={};var c,p,m,h,f=r.groupName;for(o in d)u=this._createFieldElem(o,d[o]),d[o]&&d[o].groupName&&f?(p=f[c=d[o].groupName],(m=n.find(".detail-dialog-detail-content-group[data-name='"+c+"']")).length<1&&((m=B("<div/>").addClass("detail-dialog-detail-content-group")).attr("data-name",c),h=p.template?p.template:B("<div/>").addClass("group-name").html(c),m.html(h)),m.append(u),n.append(m)):n.append(u),d.hidden&&(u.hide(),u.addClass("hide"))}l||e.append(n),this.detailContent=e}else this.detailContent=B("<div/>")},_createRemoveBtnIcon:function(){return B("<i/>").addClass("ic ic-bt-input-remove")},_attachChangeEvt:function(){var c=this;this.contentElem.on("keyup",".detail-dialog-detail-content input",function(e){var t=B(this);if(c.options.enableSaveBtnOnInputChange){var i=t.closest("[data-role='commonvalidator']");if(c.hasChanged=!0,0<i.length)if((i=i.data("kendoCommonValidator")).validate())t.closest(c.options.invalidScrollFieldListClass).find("input.k-invalid").length<1&&c.enableSaveBtn();else c.disableSaveBtn();else c.enableSaveBtn()}var a=t.siblings(".ic-bt-input-remove");0<a.length&&(B(this).val()?a.is(":visible")||a.show():a.hide())}),this.contentElem.on("click",".detail-dialog-detail-content .ic.ic-bt-input-remove",function(e){var t=B(this),i=t.siblings("input");i.val(""),i.data("kendoCommonValidator")&&i.data("kendoCommonValidator").validate(),t.hide(),c.options.enableSaveBtnOnInputChange&&(c.hasChanged=!0,c.enableSaveBtn())}),this.contentElem.on("click",".detail-dialog-detail-content .edit-all-btn",function(e){var t=B(this).closest(".detail-dialog-content-field-item").data("key"),i=c.saveSingleField(t);if(i){var a,n,o=c.getSelectedData(),s=c.options.scheme.fields,l=i[t];s[t]&&s[t].customFieldKey?(n=s[t].customFieldKey,B.isFunction(n)&&o&&(n=n(o,i)),l=o.get(n)):s[t]&&s[t].editFieldName&&s[t].editFieldName!=t&&(a=s[t].editFieldName,B.isFunction(a)&&o&&(a=a(o)),l=(l=i[t=a])||o.get(t));var r,u=c.dataSource.data(),d=u.length;for(r=0;r<d;r++)u[r]!==o&&(u[r].set(t,l),n&&u[r].set(n,l));c.options.enableSaveBtnOnInputChange&&(c.hasChanged=!0,c.enableSaveBtn())}})},enableSaveBtn:function(e){var t=this.BTN,i=this.options.enableSaveBtnCondition;this.buttons[t.SAVE].prop("disabled")&&(i&&B.isFunction(i)?i.call(this)&&this.setActions(t.SAVE,{disabled:!1}):this.setActions(t.SAVE,{disabled:!1}))},disableSaveBtn:function(e){var t=this.BTN,i=this.options.disableSaveBtnCondition;this.buttons[t.SAVE].prop("disabled")||(i&&B.isFunction(i)?i.call(this)&&this.setActions(t.SAVE,{disabled:!0}):this.setActions(t.SAVE,{disabled:!0}))},updateDisplayValue:function(){this._setSingleDetailData()},_setSingleDetailData:function(e){var t=this.options.contentViewModel,i=this.options.headerViewModel,a={};t=t&&B.extend(a,t);var n=this.selectedIndex,o=this.dataSource.at(n);this.trigger("beforeSetDetailData",{item:o}),o&&(a=B.extend(a,o));var s=this.dataSource?this.dataSource.total():0;a=y.observable(a),this.contentViewModel=a,!i||e&&this.headerViewModel||(this.headerViewModel=y.observable(i)),1<s?(this._unbindDetailContent(this.detailContent),y.bind(this.detailContent,a),this.detailHeader&&(this._unbindDetailContent(this.detailHeader),y.bind(this.detailHeader,this.headerViewModel))):(this._unbindDetailContent(this.contentElem),this._unbindFields(),y.bind(this.contentElem,a));var l=this.options.scheme;if(o&&l){var r,u,d,c=l.fields,p=this.options.selectedDetailFilter;for(r in p&&B.isFunction(p)&&(d=p(o)),c)u=this.displayFields[r],d&&-1!=d.indexOf(r)?u.closest(".detail-dialog-content-field-item").hide():this.setDisplayFieldValue(r,c[r],o);var m=l.groupName;if(p=this.options.selectedDetailFilter,m&&d)for(r in m)-1!=d.indexOf(r)&&this.detailContent.find(".detail-dialog-detail-content-group[data-name='"+r+"']").hide();this._bindDisplayViewModel()}this.trigger("afterSetDetailData")},updateDisplayField:function(e){var t=this.options.scheme.fields,i=this.getSelectedData();this.setDisplayFieldValue(e,t[e],i)},setDisplayFieldValue:function(e,t,i){var a=this.displayFields[e];if(a){var n,o,s,l=t.type,r=t.template,u=t.format,d=t.gridOptions,c=t.viewModel,p=t.fieldName,m=t.widgetDisplaySetter,h=i[e],f=[],v={};if(h=h||"-",r&&"grid"!=l){if(B.isFunction(r)?a.html(r(i)):(o=y.template(r),a.html(o(i))),c&&c.fields){var g=c.fields;if(p&&(B.isFunction(p)&&i&&(p=p(i)),h=i.get(p)),g instanceof y.data.ObservableObject&&(g=g.toJSON()),h){if((B.isArray(h)||h instanceof y.data.ObservableArray)&&(h=h[0]),h)if(p)if(B.isPlainObject(h)||h instanceof y.data.ObservableObject)for(n in g)c.fields[n]=h[n];else c.fields[p]=h;else if(B.isPlainObject(h)||h instanceof y.data.ObservableObject)for(n in g)c.fields[n]=h[n];else c.fields[e]=h}else for(n in g)c.fields[n]&&i[n]&&(c.fields[n]=i[n])}c&&c.init&&B.isFunction(c.init)&&c.init()}else if("email"==l||"text"==l||"select"==l)a.text(h);else if("datetime"==l){var C=N(h);u&&(h=C.format(u)),a.text(h)}else if("number"==l)a.text(h);else if("object"!=l)if("grid"==l){var A;if(t.gridOptions&&(v=t.gridOptions,s=t.gridOptions.group,A=t.gridOptions.filter),t.gridDataSource&&(B.isFunction(t.gridDataSource)?f=t.gridDataSource(i):B.isArray(t.gridDataSource)&&(f=t.gridDataSource)),f&&f.length<1&&r)return void(B.isFunction(r)?a.html(r(i)):(o=y.template(r),a.html(o(i))));(f=new y.data.DataSource({data:f})).read(),v.dataSource=f;var D,b,F=a.data("kendoGrid");F&&(F.wrapper&&(D=(b=F.wrapper).parent(".detail-dialog-content-field-value"),a.appendTo(D)),F.destroy(),b&&b.remove()),a.empty(),a.kendoGrid(v),f=a.data("kendoGrid").dataSource,s&&f.group(s),A&&f.group(A),d.hideHeader&&a.find(".k-grid-header").hide()}else if(l&&l.fn&&l.fn.options&&l.fn.options.name){var O,_=l,E="kendo"+_.fn.options.name;if(t.widgetOptions&&(v=B.extend(v,t.widgetOptions),s=t.widgetOptions.group,O=t.widgetOptions.filter),t.widgetDataSource&&(B.isFunction(t.widgetDataSource)?f=t.widgetDataSource(i):B.isArray(t.widgetDataSource)&&(f=t.widgetDataSource)),f&&f.length<1&&r)return void(B.isFunction(r)?a.html(r(i)):(o=y.template(r),a.html(o(i))));(f=new y.data.DataSource({data:f})).read(),v.dataSource=f;var M=a.data(E);M&&M.destroy(),a.empty(),f=(M=new _(a,v)).dataSource,!_.fn.options.group&&s&&f.group(s),!_.fn.options.filter&&O&&f.group(O),!_.fn.options.hideHeader&&v.hideHeader&&a.find(".k-grid-header").hide(),m&&B.isFunction(m)&&m.call(t,{sender:this,widget:M,data:i})}}},updateEditField:function(e){var t=this.options.scheme.fields,i=this.getSelectedData();this.setEditableFieldValue(e,t[e],i)},setEditableFieldValue:function(e,t,i){var a=this.editFields[e];if(a){var n,o=t.type,s=t.validator,l=t.editTemplate,r=t.editViewModel,u=t.editFieldName,d=t.getEditableData,c=t.widgetEditSetter,p=i[e];if(d&&B.isFunction(d)&&(p=d(i)),l){if(B.isFunction(l))a.html(l(i,r));else{var m=y.template(l);a.html(m(i))}if(r.fields){var h=r.fields;if(u&&(B.isFunction(u)&&i&&(u=u(i)),p=i.get(u)),h instanceof y.data.ObservableObject&&(h=h.toJSON()),null!=p){if((B.isArray(p)||p instanceof y.data.ObservableArray)&&(p=p[0]),null!=p)if(u)if(B.isPlainObject(p)||p instanceof y.data.ObservableObject)for(n in h)r.fields[n]=p[n];else r.fields[u]=p;else if(B.isPlainObject(p)||p instanceof y.data.ObservableObject)for(n in h)r.fields[n]=p[n];else r.fields[e]=p}else for(n in h)r.fields[n]&&i[n]?r.fields[n]=i[n]:i[n]||(r.fields[n]=null)}r.init&&B.isFunction(r.init)&&r.init()}else if("email"==o||"text"==o)s?a.data("kendoCommonValidator").element.val(p):a.val(p);else if("select"==o)a.data("kendoDropDownList").value(p);else if("date"==o)a.data("kendoCommonDatePicker").value(p);else if("number"==o)a.data("kendoNumericTextBox").value(p);else if("object"!=o&&o&&o.fn.options&&o.fn.options.name){var f="kendo"+o.fn.options.name,v=a.data(f);v.value?v.value(p):c&&B.isFunction(c)?c.call(t,{sender:this,widget:v,data:i}):console.info("this widget instance "+f+" has no set value function.")}}},getEditableFieldValue:function(e,t){var i=this.editFields[e];if(i){var a=t.type,n=t.validator,o=t.editTemplate,s=t.editViewModel,l=t.customFieldKey,r=t.widgetEditGetter,u=t.editFieldGetter,d=null;if(o){if(s&&s.fields){var c,p={},m=s.fields;for(c in m instanceof y.data.ObservableObject&&(m=m.toJSON()),m)void 0!==(d=m[c])&&(l?p=d:p[c]=d);d=p}}else if(u&&B.isFunction(u))d=u(t);else if("email"==a||"text"==a)d=n?i.data("kendoCommonValidator").element.val():i.val();else if("select"==a)d=i.data("kendoDropDownList").value();else if("datetime"!=a)if("number"==a)d=i.data("kendoNumericTextBox").value();else if(a&&a.fn&&a.fn.options&&a.fn.options.name){var h="kendo"+a.fn.options.name,f=i.data(h);f.value?d=f.value():r&&B.isFunction(r)?d=r.call(t,{sender:this,widget:f}):console.info("this widget instance "+h+" has no get value function.")}return"array"==a&&(d=[d]),d}},setEditableValue:function(e){var t=this.options.scheme;if(t){var i,a=t.fields;for(i in a)this.setEditableFieldValue(i,a[i],e)}},setEditable:function(e){this.hasChanged=!1,this.isEditable=e,this.setContentEditable(e),this.setBtnEditable(e),e&&this.contentElem.find("input.k-input").eq(0).focus()},setDialogType:function(e){this.dialogType=e,this.options.onTypeChange&&B.isFunction(this.options.onTypeChange)&&this.options.onTypeChange({sender:this,type:e})},setContentEditable:function(e){var t;e?(this.contentElem.addClass("edit-mode"),t=this.getSelectedData(),this.setEditableValue(t),this._bindEditableViewModel()):(this.updateFieldVisible(),this.contentElem.removeClass("edit-mode"))},updateFieldVisible:function(){var e=this.options.scheme,t=this.getSelectedData();if(e){var i,a,n,o,s=e.fields,l=this.options.selectedDetailFilter;for(i in l&&B.isFunction(l)&&(a=l(t)),s)o=(n=this.displayFields[i].closest(".detail-dialog-content-field-item")).is(":visible"),a&&-1!=a.indexOf(i)?n.hide():o||n.show()}},setBtnEditable:function(e){var t=this.BTN;this.setActions(t.SAVE,{visible:e,disabled:!0}),this.setActions(t.CANCEL,{visible:e}),this.setActions(t.EDIT,{visible:!e}),this.setActions(t.DELETE,{visible:!e}),this.setActions(t.CLOSE,{visible:!e})},saveSingleField:function(e){var t,i,a,n,o,s,l,r,u=this.editFields,d=this.options.scheme,c=this.options.NotAllowedBlankFields,p=this.options.saveOnlyVisibleField,m=d.fields,h=m[e].validationRule,f=!0,v={},g=this.selectedIndex;if(i=this.dataSource.at(g),r=m[e].editable,B.isFunction(r)&&(r=r(i)),!r&&!u[e])return!1;if(!r&&u[e]&&!u[e].isForceEditable)return!1;if(p&&u[e]&&!u[e].is(":visible"))return!1;if(u[e].data("kendoCommonValidator")&&(f=u[e].data("kendoCommonValidator").validate()),h&&(f=h(m[e],u[e])),f){t=this.getEditableFieldValue(e,m[e]);var C=0;if(n=m[e].editFieldName)if(B.isFunction(n)&&i&&(n=n(i)),"object"==m[e].type)if(v[n]||(-1!=(o=n.indexOf("["))?(s=n.substring(0,o),C=n.substring(o+1,o+2),v[s]||(v[s]=[],v[s].push({}))):v[n]={}),-1!=o)for(a in t)v[s][C][a]=t[a];else for(a in t)v[n][a]=t[a];else{for(a in t)v[n]=t[a];t=v[n]}(l=m[e].customFieldName)?(B.isFunction(l)&&(l=l(i)),M.setter(v,l,t)):null!=t&&(-1==c.indexOf(e)?v[e]=t:""===t&&t!=i[e]?v[e]=t:""!==t&&(v[e]=t))}return!!f&&(t=v[e],i.set(e,t),this.options.parseSaveData&&(v=this.options.parseSaveData(i,v)),v)},save:function(e,t){var i,a,n,o,s,l,r,u,d,c,p,m,h,f,v=this.editFields,g=this.options,C=g.scheme,A=g.NotAllowedBlankFields,D=g.saveOnlyVisibleField,b=C.fields,F=!0,O={},_=this.selectedIndex;for(i in o=this.dataSource.at(_),O.id=o.id,b)if(c=b[i].editable,B.isFunction(c)&&(c=c(o)),(c||v[i])&&(c||!v[i]||v[i].isForceEditable)&&(!D||!v[i]||v[i].is(":visible"))){if(b[i].validator&&v[i]&&v[i].data("kendoCommonValidator")&&(F=v[i].data("kendoCommonValidator").validate()),b[i].validationRule&&(F=b[i].validationRule(b[i],v[i])),!F&&!t){a=v[i];break}if(n=this.getEditableFieldValue(i,b[i]),l=b[i].editFieldName){B.isFunction(l)&&o&&(l=l(o));var E=0;if("object"==b[i].type)if(O[l]||(-1!=(r=l.indexOf("["))?(E=l.substring(r+1,r+2),O[u=l.substring(0,r)]||(O[u]=[],O[u].push({}))):O[l]={}),-1!=r)for(s in n)O[u][E][s]=n[s];else for(s in n)O[l][s]=n[s];else for(s in n)O[l]=n[s]}else(d=b[i].customFieldName)?(B.isFunction(d)&&(d=d(o)),M.setter(O,d,n)):null!=n&&(-1==A.indexOf(i)?O[i]=n:""===n&&n!=o[i]?O[i]=n:""!==n&&(O[i]=n))}if(!F&&!t)return!e&&a&&this.detailContent&&this.scrollToField(a),!1;for(i in O)if(n=O[i],"meters"!=i&&"users"!=i&&"devices"!=i)t||o.set(i,O[i]);else for(m=n.length,p=0;p<m;p++)for(u in h=n[p],(f=o.get(i+"["+p+"]"))||((f=o.get(i))||(f=[],t||o.set(i,f)),f={},t||o.set(i+"["+p+"]",f),f=o.get(i+"["+p+"]")),h)t||f.set(u,h[u]);return this.options.parseSaveData&&(O=this.options.parseSaveData(o,O)),O},scrollToField:function(e){var t=this.options,i=t.invalidScrollFieldClass,a=t.invalidScrollWrapperClass,n=t.invalidScrollFieldListClass;if((e=e.closest(i)).is(":visible")){var o=e.closest(a),s=e.closest(n),l=e.position();if(0<s.length){var r=s.offset();l.top=l.top-r.top}o.scrollTop(l.top)}},saveAll:function(e,t){var i;this.save(),i=t?this.dataSource.updated():this.dataSource.data();var a,n,o,s,l,r,u,d,c,p,m,h,f=this.options.scheme,v=this.options.saveOnlyVisibleField,g=f.fields,C=i.length,A=this.editFields,D=[];for(o=0;o<C;o++){for(n in l=i[o],s={},g)if(h=g[n].editable,B.isFunction(h)&&(h=h(l)),(h||A[n])&&(h||!A[n]||A[n].isForceEditable)&&(!v||!A[n]||A[n].is(":visible")))if((a=g[n])&&a.editFieldName){p=a.editFieldName,B.isFunction(p)&&l&&(p=p(l));var b=0;if(-1!=(r=p.indexOf("["))){if(u=p.substring(0,r),b=p.substring(r+1,r+2),s[u]||(s[u]=[],s[u].push({})),a.editViewModel&&a.editViewModel.fields)for(d in(c=a.editViewModel.fields)instanceof y.data.ObservableObject&&(c=c.toJSON()),c)l[u]&&l[u][b]&&(s[u][b][d]=l[u][b][d])}else s[p]=l[p]}else a&&a.customFieldName?(m=a.customFieldName,B.isFunction(m)&&(m=m(l)),M.setter(s,m,M.getter(l,m))):s[n]=l[n];if(s.id=l.id,e)for(n in e)s[n]=e[n];D.push(s)}return this.options.parseSaveData&&(D=this.options.parseSaveData(i,D)),D},cancel:function(){this.cancelDataSource(),this.grid&&this.updateDisplayValue()},success:function(){if(this.updateDisplayValue(),this.grid){var e=this.dataSource.data();e=e.toJSON();var t=new y.data.DataSource({data:e});this.grid.setDataSource(t)}this.dataSource&&this.dataSource.data(this.dataSource.data())},fail:function(){this.cancel()},updateDataSource:function(e){var t,i,a=this.contentElem.data("id"),n=this.dataSource.get(a);for(t in e)(i=e[t])&&n.set(t,i);this.updateDisplayValue()},cancelDataSource:function(){this.dataSource.cancelChanges()},hideRemoveBtn:function(){this.detailContent.find(".ic.ic-bt-input-remove").hide()},hideInvalidMessage:function(){var e,t=this.editFields;for(e in t)t[e].data("kendoCommonValidator")&&t[e].data("kendoCommonValidator").hideMessages()},open:function(e){this.dataSource&&0==this.dataSource.total()&&this.setDataSource(this.dataSource),this.setDialogType(e);var t=n.fn.open.call(this);return this.updateDetailContentWidth(),this.virtualization&&this.grid&&this.grid.dataSource.fetch(),t},updateDetailContentWidth:function(){this.grid&&this.detailContent&&this.detailContent.width(this._getDetailContentWidth())},getSelectedData:function(){var e=this.selectedIndex;return this.dataSource.at(e)},_processTemplate:function(){},_createContentList:function(){},_bindDisplayViewModel:function(){var e,t=this.options.scheme.fields;for(e in t)this._bindDisplayViewModelField(e,t[e])},_bindDisplayViewModelField:function(e,t){var i=t.viewModel,a=this.displayFields[e];a&&i&&(i=t.viewModel=y.observable(i),y.bind(a,i),this.displayFields[e].viewModel=i)},_bindEditableViewModel:function(){var e=this.options.scheme;if(e){var t,i=e.fields;for(t in i)this._bindEditableViewModelField(t,i[t])}},_bindEditableViewModelField:function(e,t){var i=t.editViewModel,a=this.editFields[e];a&&i&&(i=t.editViewModel=y.observable(i),y.bind(a,i),this.editFields[e].viewModel=i)},_createFieldElem:function(e,t){var i,a=t.type,n=t.editable,o=t.template,s=t.valueFieldDisplayType,l=this.getSelectedData();B.isFunction(n)&&(n=!!l&&n(l));var r=t.type;a&&a.fn&&a.fn.options&&a.fn.options.name&&(r=r.fn.options.name);var u=B("<li/>").addClass("detail-dialog-content-field-item").attr({"data-type":r,"data-editable":n,"data-key":e});(i=B("<div/>").addClass("detail-dialog-content-field-name")).html(t.name),i.appendTo(u);var d=B("<div/>").addClass("detail-dialog-content-field-value");"row"==s&&d.addClass("row");var c=B("<span/>").addClass("display");return o&&c.addClass("detail-dialog-content-field-template"),c.appendTo(d),this.displayFields[e]=c,n&&this.createEditableFieldElem(d,e,t),d.appendTo(u),u},createEditableFieldElem:function(e,t,i){var a=i.type,n=i.validator,o=i.numeric,s=i.dropdown,l=i.editTemplate,r=i.editCss,u=i.hasInputRemoveBtn,d=i.datepicker,c=i.isEditAll,p=i.widgetOptions;r=r||{};var m,h=B("<span/>").addClass("editable");if(l?m=B("<span/>").addClass("detail-dialog-content-field-template").appendTo(h).css(r):"email"==a?m=B("<input/>").attr({type:"email"}).addClass("k-input").appendTo(h).css(r):"text"==a?m=B("<input/>").attr({type:"text"}).addClass("k-input").appendTo(h).css(r):"select"==a?(m=B("<select/>").appendTo(h).css(r),s?(s.animation=!1,m.kendoDropDownList(s)):m.kendoDropDownList({animation:!1}),m.kendoDropDownList.bind("change",this.enableSaveBtn.bind(this))):"date"==a?(m=B("<input/>").appendTo(h).css(r),d?m.kendoCommonDatePicker(d):m.kendoCommonDatePicker()):"number"==a&&(m=B("<input/>").appendTo(h).css(r),o?m.kendoNumericTextBox(o):m.kendoNumericTextBox({spinner:!1})),"email"!=a&&"text"!=a||!n||(B.isPlainObject(n)?m.kendoCommonValidator(n):m.kendoCommonValidator({type:t})),"email"!=a&&"text"!=a||u&&(this._createRemoveBtnIcon().appendTo(h),m.addClass("has-remove-btn")),a&&a.fn&&a.fn.options&&a.fn.options.name){new a(m=B("<div/>").addClass("detail-dialog-content-field-widget").appendTo(h).css(r),p)}if(this.editFields[t]=m,h.appendTo(e),c){h.addClass("has-edit-all-btn");var f=v.I18N;B("<button/>").addClass("k-button edit-all-btn editable").text(f.prop("COMMON_BTN_CHANGE_ALL")).appendTo(e)}},setEditableFieldElem:function(e,t){var i=this,a=i.displayFields[e];if(a){var n=a.closest(".detail-dialog-content-field-value");if(0!=n.length){var o=n.closest(".detail-dialog-content-field-item");if(t){if(o.attr("data-editable",!0),o.show(),i.editFields[e])return;var s=this.options.scheme.fields;i.createEditableFieldElem(n,e,s[e]),i.editFields[e].isForceEditable=!0;var l=this.getSelectedData();i.setEditableFieldValue(e,s[e],l),i._bindEditableViewModelField(e,s[e])}else{if(o.attr("data-editable",!1),o.hide(),!i.editFields[e])return;y.unbind(i.editFields[e]),i.editFields[e].closest("span.editable").remove(),delete i.editFields[e]}}}}}),y.ui.plugin(t)}(window,window.kendo.jQuery),function(h,g){"use strict";var i=/^[A-Za-z0-9_.]+$/,a=/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[`~!@#$%^&*()_\-=+])[a-zA-Z\d`~!@#$%^&*()_\-=+]{8,20}$/,n=/^[A-Za-z0-9`~!@#$%^&*()_\-=+]+$/,o=/^(?=.{4,25}$)(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?[\-\.\ \\\/]?(\d+))?$/,s=/^[0-9-(+)\s]+$/,l=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,r=/^[A-Za-z0-9_.@+-]+$/,u=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,d=/^[A-Za-z0-9.-]+$/,c=/^(0|[1-9][0-9]*)$/,p=/^[-+]?[0-9]+(\.[0-9]{1,2})?$/,m=/^(?=.{4,255}$)([\p{L}_\-\s0-9\.]+)\.key$/,f=/^(E2C56DB5\-DFFB\-).*$/,v=/^[A-Fa-f0-9-]+$/,C=/^(?=.{1,255}$)([\._\-\s0-9a-zA-Z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+)$/,A=/^#([A-Fa-f0-9]{6}$)/,D=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",b="k-invalid-msg";function F(e){var t=e.data("kendoCommonValidator");return t=t||e.closest("[data-role='commonvalidator']").data("kendoCommonValidator")}var O=h.kendo,_=O.ui.Validator,e=_.extend({options:{name:"CommonValidator",required:!1,type:null,minLength:null,maxLength:null,min:null,max:null,passwordRetypeFor:null,oldPassword:null,mixedPasswordCheck:!0,isKeyUpValidation:!0,scrollWrapperClass:null,builtInMinMax:{id:{min:5,max:16},password:{min:8,max:20},passwordRetype:{min:8,max:20},name:{min:1,max:30},hmiGraphicName:{min:1,max:50},hmiLibraryName:{min:1,max:30},mobilePhoneNumber:{min:4,max:25},email:{min:5,max:253},networkId:{min:1,max:32},description:{max:300},organization:{min:1,max:30}},builtInRules:{minLength:function(e){var t=F(e).options.minLength;if(t){var i=e.val();if(""!==i&&i.length<t)return!1}return!0},maxLength:function(e){var t=F(e).options.maxLength;if(t){var i=e.val();if(""!==i&&i.length>t)return!1}return!0}},builtInMessages:{minLength:function(){var e=this.options.minLength;return h.I18N.prop("COMMON_CANNOT_INPUT_LESS",e)},maxLength:function(){var e=this.options.maxLength;return h.I18N.prop("COMMON_CANNOT_INPUT_MORE",e)}},builtInOptions:{id:{messages:{capslock:"COMMON_CAPS_LOCK_ON",invalidCharacter:"COMMON_INVALID_CHARACTER",required:"COMMON_REQUIRED_ID",alreadyUse:"COMMON_EXIST_ID"},rules:{invalidCharacter:function(e){var t=e.val();return!t||t.match(i)}}},password:{messages:{capslock:"COMMON_CAPS_LOCK_ON",invalidCharacter:"COMMON_INVALID_CHARACTER",required:"COMMON_REQUIRED_PASSWORD",incorrect:"COMMON_INCORRECT_PASSWORD",incorrectBoth:"COMMON_INCORRECT_USERNAME_AND_PASSWORD",pwMixedCharacter:"COMMON_MUST_MIXED_PASSWORD",sameOldPassword:"COMMON_SAME_OLD_PASSWORD"},rules:{invalidCharacter:function(e){var t=e.val();return!t||t.match(n)},pwMixedCharacter:function(e){var t=e.val();return!t||t.match(a)},sameOldPassword:function(e){var t=e.val(),i=F(e).options.oldPassword;return!i||!(i.val()==t)}}},name:{messages:{required:"COMMON_REQUIRED_INFORMATION"}},name_16:{messages:{required:"COMMON_REQUIRED_INFORMATION",under16:"COMMON_NOT_LENGTH_16"},rules:{under16:function(e){return!(16<e.val().length)}}},hmiGraphicName:{messages:{required:"COMMON_REQUIRED_INFORMATION",invalidCharacter:"COMMON_INVALID_CHARACTER"},rules:{invalidCharacter:function(e){var t=e.val();return!t||t.match(C)}}},hmiLibraryName:{messages:{required:"COMMON_REQUIRED_INFORMATION",invalidCharacter:"COMMON_INVALID_CHARACTER"},rules:{invalidCharacter:function(e){var t=e.val();return!t||t.match(C)}}},hexColor:{messages:{invalidColor:"COMMON_INVALID_COLOR"},rules:{invalidColor:function(e){var t=e.val();return!t||t.match(A)}}},description:{messages:{required:"COMMON_REQUIRED_INFORMATION"}},mobilePhoneNumber:{messages:{invalidCharacter:"COMMON_INVALID_CHARACTER",invalidPhone:"COMMON_INVALID_PHONE_NUMBER"},rules:{invalidCharacter:function(e){var t=e.val();return!t||t.match(s)},invalidPhone:function(e){var t=e.val();return!t||t.match(o)}}},email:{messages:{email:"COMMON_INVALID_EMAIL_ADDRESS",invalidCharacter:"COMMON_INVALID_CHARACTER"},rules:{email:function(e){var t=e.val();return!t||t.match(l)},invalidCharacter:function(e){var t=e.val();return!t||t.match(r)}}},passwordRetype:{messages:{required:"COMMON_REQUIRED_INFORMATION",notMatched:"COMMON_NOT_MATCHED_PASSWORD",invalidCharacter:"COMMON_INVALID_CHARACTER",pwMixedCharacter:"COMMON_MUST_MIXED_PASSWORD"},rules:{notMatched:function(e){return e.val()==F(e).options.passwordRetypeFor.val()},invalidCharacter:function(e){var t=e.val();return!t||t.match(n)},pwMixedCharacter:function(e){var t=e.val();return!t||t.match(a)}}},ipAddress:{messages:{required:"COMMON_REQUIRED_INFORMATION",invalidIpAddress:"COMMON_INVALID_CHARACTER"},rules:{invalidIpAddress:function(e){var t=e.val();return!t||t.match(u)}}},networkId:{messages:{required:"COMMON_REQUIRED_INFORMATION",invalidNetworkId:"COMMON_INVALID_CHARACTER"},rules:{invalidNetworkId:function(e){var t=e.val();return!t||t.match(d)}}},onlyNumber:{messages:{required:"COMMON_REQUIRED_INFORMATION",invalidNumber:"COMMON_INVALID_VALUE"},rules:{invalidNumber:function(e){var t=e.val();return!t||t.match(c)}}},numeric:{messages:{required:"COMMON_REQUIRED_INFORMATION",numeric:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)}},rules:{numeric:function(e){var t=e.val();return!t||t.match(c)},min:function(e){var t=F(e).options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=F(e).options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))}}},hmiValueMinMax:{messages:{required:"COMMON_REQUIRED_INFORMATION",decimal:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)},minField:function(e){var t=h.I18N,i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest(".hmi-binding-property-inner-wrapper").find(".hmi-binding-property-category[data-key='minMax']").find("ul.category-items").find("li.property[data-key='minValue']").find(n).val();return t.prop("COMMON_INVALID_MIN",o)},maxField:function(e){var t=h.I18N,i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest(".hmi-binding-property-inner-wrapper").find(".hmi-binding-property-category[data-key='minMax']").find("ul.category-items").find("li.property[data-key='maxValue']").find(n).val();return t.prop("COMMON_INVALID_MAX",o)}},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=this.options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=this.options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))},minField:function(e){var t=e.val(),i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest(".hmi-binding-property-inner-wrapper").find(".hmi-binding-property-category[data-key='minMax']").find("ul.category-items").find("li.property[data-key='minValue']").find(n);if(o.prop("disabled"))return!0;var s=o.val();return null==s||(null==t||-1!=t.indexOf(" ")||!((t=Number(t))<s))},maxField:function(e){var t=e.val(),i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest(".hmi-binding-property-inner-wrapper").find(".hmi-binding-property-category[data-key='minMax']").find("ul.category-items").find("li.property[data-key='maxValue']").find(n);if(o.prop("disabled"))return!0;var s=o.val();return null==s||(null==t||-1!=t.indexOf(" ")||!(s<(t=Number(t))))}}},hmiMinMax:{messages:{required:"COMMON_REQUIRED_INFORMATION",decimal:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)},minField:function(e){var t=h.I18N,i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest("li.property").closest("ul.category-items").find("li.property[data-key='minValue']").find(n).val();return t.prop("COMMON_INVALID_MIN",o)},maxField:function(e){var t=h.I18N,i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=".value .k-input";(i||a)&&(n=".value .k-input[data-role='numerictextbox']");var o=e.closest("li.property").closest("ul.category-items").find("li.property[data-key='maxValue']").find(n).val();return t.prop("COMMON_INVALID_MAX",o)},sameMinMax:"HMI_EQUAL_MIN_MAX_MSG"},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=this.options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=this.options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))},minField:function(e){var t=e.val(),i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=e.closest("li.property"),o=n.closest("ul.category-items");if(!("minValue"==n.data("key"))){var s=".value .k-input";(i||a)&&(s=".value .k-input[data-role='numerictextbox']");var l=o.find("li.property[data-key='minValue']").find(s).val();if(null==l)return!0;if(null==t||-1!=t.indexOf(" "))return!0;if((t=Number(t))<l)return!1}return!0},maxField:function(e){var t=e.val(),i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=e.closest("li.property"),o=n.closest("ul.category-items");if("minValue"==n.data("key")){var s=".value .k-input";(i||a)&&(s=".value .k-input[data-role='numerictextbox']");var l=o.find("li.property[data-key='maxValue']").find(s).val();if(null==l)return!0;if(null==t||-1!=t.indexOf(" "))return!0;if(l<(t=Number(t)))return!1}return!0},sameMinMax:function(e){var t=e.val(),i="numerictextbox"==e.attr("data-role"),a=e.hasClass("k-formatted-value"),n=e.closest("li.property"),o=n.closest("ul.category-items"),s=".value .k-input";return(i||a)&&(s=".value .k-input[data-role='numerictextbox']"),t!=("minValue"==n.data("key")?o.find("li.property[data-key='maxValue']"):o.find("li.property[data-key='minValue']")).find(s).val()}}},hmiTotalMinMax:{messages:{required:"COMMON_REQUIRED_INFORMATION",decimal:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)},rowMin:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.min.total").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MIN",t)},rowMax:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.max.total").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MAX",t)}},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=this.options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=this.options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))},rowMin:function(e){if(e.hasClass("max")){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.min.total").val();if(null==t)return!0;var i=e.val();if(null==i||-1!=i.indexOf(" "))return!0;if((i=Number(i))<t)return!1}return!0},rowMax:function(e){if(e.hasClass("min")){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.max.total").val();if(null==t)return!0;var i=e.val();if(null==i||-1!=i.indexOf(" "))return!0;if(t<(i=Number(i)))return!1}return!0}}},hmiImageListMinMax:{messages:{required:"COMMON_REQUIRED_INFORMATION",numeric:"COMMON_INVALID_VALUE",min:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.min.total").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MIN",t)},max:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.max.total").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MAX",t)},rowMin:function(e){var t=e.closest("td").find(".k-input.min").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MIN",t)},rowMax:function(e){var t=e.closest("td").find(".k-input.max").val();return h.I18N.prop("HMI_LIBRARY_MULTI_MAX",t)},range:"HMI_LIBRARY_MULTI_OVERLAP"},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.min.total").val();if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=e.closest(".hmi-library-palette-dialog").find(".k-input.max.total").val();if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))},rowMin:function(e){var t;if(e.hasClass("max")){if(null==(t=e.val())||-1!=t.indexOf(" "))return!0;if((t=Number(t))<e.closest("td").find(".k-input.min").val())return!1}return!0},rowMax:function(e){var t;if(e.hasClass("min")){if(null==(t=e.val())||-1!=t.indexOf(" "))return!0;if(t=Number(t),e.closest("td").find(".k-input.max").val()<t)return!1}return!0},range:function(e){var l=e.val();if(null==l||-1!=l.indexOf(" "))return!0;l=Number(l);var r=e.data("id"),t=e.closest(".image-list").find("tbody > tr"),u=!0;return t.each(function(e,t){var i=g(t),a=i.find(".list-range-validator.min .k-input");if(a.data("id")==r)return!0;var n=i.find(".list-range-validator.max .k-input"),o=a.val(),s=n.val();return o<=l&&l<=s?u=!1:void 0}),u}}},hmiOptionValues:{messages:{required:"COMMON_REQUIRED_INFORMATION",decimal:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)},sameValue:"HMI_OPTION_VALUES_DUPLICATE"},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=this.options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=this.options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))},sameValue:function(e){var t="numerictextbox"==e.attr("data-role"),i=e.hasClass("k-formatted-value"),a=e.val();if(null==a||-1!=a.indexOf(" "))return!0;a=Number(a);var n=e.closest(".hmi-binding-option-values"),o=e.closest(".hmi-binding-option-value-item").get(0),s=".value .k-input";(t||i)&&(s=".value .k-input[data-role='numerictextbox']");var l=n.find(".hmi-binding-option-value-item"),r=!1;return l.each(function(e,t){if(o===t)return!0;var i=g(t).find(".hmi-binding-option-value-item-value "+s).val();return a==i?!(r=!0):void 0}),!r}}},decimal:{messages:{required:"COMMON_REQUIRED_INFORMATION",decimal:"COMMON_INVALID_VALUE",min:function(e){var t=F(e).options.min;return h.I18N.prop("COMMON_INVALID_MIN",t)},max:function(e){var t=F(e).options.max;return h.I18N.prop("COMMON_INVALID_MAX",t)}},rules:{decimal:function(e){var t=e.val();return!t||t.match(p)},min:function(e){var t=this.options.min;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!((i=Number(i))<t)},max:function(e){var t=this.options.max;if(null==t)return!0;var i=e.val();return null==i||-1!=i.indexOf(" ")||!(t<(i=Number(i)))}}},licenseFileName:{messages:{invalidName:"LICENSE_MESSAGE_SELECTED_FILE_NAME_INVALID"},rules:{invalidName:function(e){var t=e.val();return!t||t.match(m)}}},uuid:{messages:{invalidName:"COMMON_INVALID_UUID",notMatched:"COMMON_NOT_HEX_UUID",notLength36:"COMMON_NOT_LENGTH_36"},rules:{invalidName:function(e){var t=e.val();return!t||t.match(f)},notMatched:function(e){var t=e.val();return!t||t.match(v)},notLength36:function(e){var t=e.val();return!t||36==t.length}}},uuid_min:{messages:{notMatched:"COMMON_NOT_HEX_UUID",notLength36:"COMMON_NOT_LENGTH_36"},rules:{notMatched:function(e){var t=e.val();return!t||t.match(v)},notLength36:function(e){var t=e.val();return!t||36==t.length}}}}},init:function(e,t){var i,a,n,o=this,s=g(e);(t=t||{}).minLength||(t.minLength=s.data("min-length")),t.maxLength||(t.maxLength=s.data("max-length")),o._setDefaultMinMaxLength(t);var l=h.I18N;if(t.messages||(t.messages={}),t.rules||(t.rules={}),t.minLength&&(t.messages.minLength=o.options.builtInMessages.minLength.bind(this)),t.maxLength&&(t.messages.maxLength=o.options.builtInMessages.maxLength.bind(this)),t.rules.minLength||(t.rules.minLength=o.options.builtInRules.minLength),t.rules.maxLength||(t.rules.maxLength=o.options.builtInRules.maxLength),i=o.options.builtInOptions,"passwordRetype"==(a=t.type)&&(t.passwordRetypeFor&&(t.passwordRetypeFor=g(t.passwordRetypeFor)),n="#"+s.data("retype-for"),t.passwordRetypeFor||(t.passwordRetypeFor=g(n)),t.passwordRetypeFor&&0!=t.passwordRetypeFor.length||console.error("there is no target password field for this password retype field.")),"password"==a){var r=s.data("oldPassword");r&&(n="#"+r,t.oldPassword=g(n))}if(o._attachEvt(s,a),a&&i[a]){var u,d,c,p=i[a].messages,m=i[a].rules;for(u in p)if((d=p[u])&&!t.messages[u]&&("string"==typeof d?t.messages[u]=l.prop(d):g.isFunction(d)&&(t.messages[u]=d.bind(this))),m){if(c=m[u],"pwMixedCharacter"==u&&0==t.mixedPasswordCheck)continue;c&&!t.rules[u]&&(t.rules[u]=c)}}t.required&&(t.messages.required||(t.messages.required=l.prop("COMMON_REQUIRED_INFORMATION")),s.prop("required",!0)),t=g.extend({},o.options,t),_.fn.init.call(this,e,t),s.addClass("common-validator")},_attachEvt:function(e,t){"id"==t||"password"==t||"email"==t||"passwordRetype"==t?e.on("keydown",this._blockSpaceEvt):"name"!=t&&"description"!=t&&"mobilePhoneNumber"!=t||e.on("change",this._trimOnChange),this.options.isKeyUpValidation&&e.on("keyup",this._keyupEvt)},_trimOnChange:function(e){var t=g(this).val();g(this).val(g.trim(t))},_keyupEvt:function(e){var t=g(this).data("kendoCommonValidator");t&&t.validate()},_blockSpaceEvtFirstAndLast:function(e){if(32==e.keyCode){if(0==this.selectionEnd&&0==this.selectionStart)return!1;var t=g(this).val();if(t.length==this.selectionEnd&&t.length==this.selectionStart)return!1}},_blockSpaceEvt:function(e){if(32==e.keyCode)return!1},_setDefaultMinMaxLength:function(e){var t;t=this.options.builtInMinMax[e.type],!e.minLength&&t&&(e.minLength=t.min),!e.maxLength&&t&&(e.maxLength=t.max)},validate:function(e,t,i){var a,n,o,s=!1,l=this.value();if(this._errors={},this.element.is(D))s=this.validateInput(this.element,e,t);else{var r=!1;for(n=0,o=(a=this.element.find(this._inputSelector)).length;n<o;n++)this.validateInput(a.eq(n),e,t)||(r=!0);s=!r}return i||this.trigger("validate",{valid:s}),l!==s&&this.trigger("change"),s},validateInput:function(e,t,i){e=g(e),this._isValidated=!0;var a,n,o=this,s=o.options,l=o._errorTemplate,r=o._checkValidity(e,t,i),u=r.valid,d=e.attr("name")||"",c=o._findMessageContainer(d).add(e.next(".k-invalid-msg").filter(function(){var e=g(this);return!e.filter("["+O.attr("for")+"]").length||e.attr(O.attr("for"))===d})).hide(),p=!e.attr("aria-invalid");if(e.removeAttr("aria-invalid"),u)delete o._errors[d];else{a=o._extractMessage(e,r.key),o._errors[d]=a;var m=(n=l({message:a.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}),g.parseHTML?g(g.parseHTML(n)):g(n)),h=c.attr("id");if(o._decorateMessageContainer(m,d),h&&m.attr("id",h),c.replaceWith(m).length||(e.hasClass("k-formatted-value")?m.insertAfter(e.siblings("[data-role='numerictextbox']")):m.insertAfter(e)),m.show(),e.attr("aria-invalid",!0),e.is(":focus")&&s.scrollWrapperClass){var f=m.offset(),v=g("."+s.scrollWrapperClass);v.scrollTop()<f.top&&v.scrollTop(f.top)}}return p!==u&&this.trigger("validateInput",{valid:u,input:e}),e.toggleClass("k-invalid",!u),e.toggleClass("k-valid",u),u},_checkValidity:function(e,t,i){var a,n=this.options.rules;if(t){if(i)return{valid:!1,key:t};if(!(a=n[t]))return{valid:!0};if(!a.call(this,e))return{valid:!1,key:t}}else for(a in n)if(!n[a].call(this,e))return{valid:!1,key:a};return{valid:!0}},hideMessages:function(e){var t="."+b,i=this.element;e||(i.is(D)?i.removeClass("k-invalid"):i.find(".k-invalid").removeClass("k-invalid")),i.is(D)?i.next(t).hide():i.find(t).hide()},_extractMessage:function(e,t){var i=this.options.messages[t],a=e.attr("name");return i=O.isFunction(i)?i(e):i,O.format(e.attr(O.attr(t+"-msg"))||e.attr("validationMessage")||i||e.attr("title")||"",a,e.attr(t)||e.attr(O.attr(t)))}});O.ui.plugin(e)}(window,jQuery);