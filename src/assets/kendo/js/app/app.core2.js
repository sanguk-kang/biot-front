var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var r;if(e)for(r=0;r<e.length&&(!e[r]||!t(e[r],r,e));r+=1);}function eachReverse(e,t){var r;if(e)for(r=e.length-1;-1<r&&(!e[r]||!t(e[r],r,e));--r);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var r;for(r in e)if(hasProp(e,r)&&t(e[r],r))break}function mixin(r,e,n,i){return e&&eachProp(e,function(e,t){!n&&hasProp(r,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?r[t]=e:(r[t]||(r[t]={}),mixin(r[t],e,n,i)))}),r}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,r,n){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=n,r&&(i.originalError=r),i}function newContext(d){function f(e,t,r){var n,i,o,a,s,d,u,p,l,c,f=t&&t.split("/"),m=A.map,h=m&&m["*"];if(e&&(d=(e=e.split("/")).length-1,A.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),function(e){var t,r;for(t=0;t<e.length;t++)if("."===(r=e[t]))e.splice(t,1),--t;else if(".."===r){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),r&&m&&(f||h)){e:for(o=(i=e.split("/")).length;0<o;--o){if(s=i.slice(0,o).join("/"),f)for(a=f.length;0<a;--a)if(n=(n=getOwn(m,f.slice(0,a).join("/")))&&getOwn(n,s)){u=n,p=o;break e}!l&&h&&getOwn(h,s)&&(l=getOwn(h,s),c=o)}!u&&l&&(u=l,p=c),u&&(i.splice(0,p,u),e=i.join("/"))}return getOwn(A.pkgs,e)||e}function u(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===C.contextName)return e.parentNode.removeChild(e),!0})}function p(e){var t=getOwn(A.paths,e);if(t&&isArray(t)&&1<t.length)return t.shift(),C.require.undef(e),C.makeRequire(null,{skipMap:!0})([e]),!0}function m(e){var t,r=e?e.indexOf("!"):-1;return-1<r&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function l(e,t,r,n){var i,o,a,s,d=null,u=t?t.name:null,p=e,l=!0,c="";return e||(l=!1,e="_@r"+(P+=1)),d=(s=m(e))[0],e=s[1],d&&(d=f(d,u,n),o=getOwn(b,d)),e&&(d?c=r?e:o&&o.normalize?o.normalize(e,function(e){return f(e,u,n)}):-1===e.indexOf("!")?f(e,u,n):e:(d=(s=m(c=f(e,u,n)))[0],c=s[1],r=!0,i=C.nameToUrl(c))),{prefix:d,name:c,parentMap:t,unnormalized:!!(a=!d||o||r?"":"_unnormalized"+(R+=1)),url:i,originalName:p,isDefine:l,id:(d?d+"!"+c:c)+a}}function c(e){var t=e.id,r=getOwn(x,t);return r=r||(x[t]=new C.Module(e))}function h(e,t,r){var n=e.id,i=getOwn(x,n);!hasProp(b,n)||i&&!i.defineEmitComplete?(i=c(e)).error&&"error"===t?r(i.error):i.on(t,r):"defined"===t&&r(b[n])}function g(r,e){var t=r.requireModules,n=!1;e?e(r):(each(t,function(e){var t=getOwn(x,e);t&&(t.error=r,t.events.error&&(n=!0,t.emit("error",r)))}),n||req.onError(r))}function y(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(C.defQueueMap[t]=!0),D.push(e)}),globalDefQueue=[])}function T(e){delete x[e],delete S[e]}function v(){var e,n,t=1e3*A.waitSeconds,i=t&&C.startTime+t<(new Date).getTime(),o=[],a=[],s=!1,d=!0;if(!E){if(E=!0,eachProp(S,function(e){var t=e.map,r=t.id;if(e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&i)p(r)?s=n=!0:(o.push(r),u(r));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return d=!1}),i&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=C.contextName,g(e);d&&each(a,function(e){!function i(o,a,s){var e=o.map.id;o.error?o.emit("error",o.error):(a[e]=!0,each(o.depMaps,function(e,t){var r=e.id,n=getOwn(x,r);!n||o.depMatched[t]||s[r]||(getOwn(a,r)?(o.defineDep(t,b[r]),o.check()):i(n,a,s))}),s[e]=!0)}(e,{},{})}),i&&!n||!s||!isBrowser&&!isWebWorker||I||(I=setTimeout(function(){I=0,v()},50)),E=!1}}function a(e){hasProp(b,e[0])||c(l(e[0],null,!0)).init(e[1],e[2])}function r(e,t,r,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(r,t,!1)}function i(e){var t=e.currentTarget||e.srcElement;return r(t,C.onScriptLoad,"load","onreadystatechange"),r(t,C.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;for(y();D.length;){if(null===(e=D.shift())[0])return g(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));a(e)}C.defQueueMap={}}var E,e,C,O,I,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},x={},S={},n={},D=[],b={},N={},M={},P=1,R=1;return O={require:function(e){return e.require?e.require:e.require=C.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?b[e.map.id]=e.exports:e.exports=b[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(n,e.id)||{},this.map=e,this.shim=getOwn(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,r,n){n=n||{},this.inited||(this.factory=t,r?this.on("error",r):this.events.error&&(r=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=r,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,--this.depCount,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,C.startTime=(new Date).getTime();var e=this.map;return this.shim?void C.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;N[e]||(N[e]=!0,C.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,r=this.map.id,n=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=C.execCb(r,o,n,i)}catch(t){e=t}else i=C.execCb(r,o,n,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",g(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(b[r]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(C,this.map,a)}T(r),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(C.defQueueMap,r)||this.fetch()}},callPlugin:function(){var d=this.map,u=d.id,e=l(d.prefix);this.depMaps.push(e),h(e,"defined",bind(this,function(e){var o,t,r,n=getOwn(M,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=C.makeRequire(d.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return f(e,a,!0)})||""),h(t=l(d.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((r=getOwn(x,t.id))&&(this.depMaps.push(t),this.events.error&&r.on("error",bind(this,function(e){this.emit("error",e)})),r.enable()))):n?(this.map.url=C.nameToUrl(n),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[u],eachProp(x,function(e){0===e.map.id.indexOf(u+"_unnormalized")&&T(e.map.id)}),g(e)}),o.fromText=bind(this,function(e,t){var r=d.name,n=l(r),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),c(n),hasProp(A.config,u)&&(A.config[r]=A.config[u]);try{req.exec(e)}catch(e){return g(makeError("fromtexteval","fromText eval for "+u+" failed: "+e,e,[u]))}i&&(useInteractive=!0),this.depMaps.push(n),C.completeLoad(r),s([r],o)}),void e.load(d.name,s,o,A))})),C.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(S[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var r,n,i;if("string"==typeof e){if(e=l(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(O,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,h(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?h(e,"error",bind(this,this.errback)):this.events.error&&h(e,"error",bind(this,function(e){this.emit("error",e)}))}r=e.id,n=x[r],hasProp(O,r)||!n||n.enabled||C.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(x,e.id);t&&!t.enabled&&C.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var r=this.events[e];(r=r||(this.events[e]=[])).push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(C={config:A,contextName:d,registry:x,defined:b,urlFetched:N,defQueue:D,defQueueMap:{},Module:e,makeModuleMap:l,nextTick:req.nextTick,onError:g,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var r=e.urlArgs;e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+r}}var n=A.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(A[t]||(A[t]={}),mixin(A[t],e,!0,!0)):A[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(M[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=C.makeShimExports(e)),n[t]=e}),A.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(x,function(e,t){e.inited||e.map.unnormalized||(e.map=l(t,null,!0))}),(e.deps||e.callback)&&C.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(o,a){function s(e,t,r){var n,i;return a.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?g(makeError("requireargs","Invalid require call"),r):o&&hasProp(O,e)?O[e](x[o.id]):req.get?req.get(C,e,o,s):(n=l(e,o,!1,!0).id,hasProp(b,n)?b[n]:g(makeError("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+d+(o?"":". Use require([])")))):(_(),C.nextTick(function(){_(),(i=c(l(null,o))).skipMap=a.skipMap,i.init(e,t,r,{enabled:!0}),v()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,r=e.lastIndexOf("."),n=e.split("/")[0];return-1!==r&&(!("."===n||".."===n)||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),C.nameToUrl(f(e,o&&o.id,!0),t,!0)},defined:function(e){return hasProp(b,l(e,o,!1,!0).id)},specified:function(e){return e=l(e,o,!1,!0).id,hasProp(b,e)||hasProp(x,e)}}),o||(s.undef=function(r){y();var e=l(r,o,!0),t=getOwn(x,r);t.undefed=!0,u(r),delete b[r],delete N[e.url],delete n[r],eachReverse(D,function(e,t){e[0]===r&&D.splice(t,1)}),delete C.defQueueMap[r],t&&(t.events.defined&&(n[r]=t.events),T(r))}),s},enable:function(e){getOwn(x,e.id)&&c(e).enable()},completeLoad:function(e){var t,r,n,i=getOwn(A.shim,e)||{},o=i.exports;for(y();D.length;){if(null===(r=D.shift())[0]){if(r[0]=e,t)break;t=!0}else r[0]===e&&(t=!0);a(r)}if(C.defQueueMap={},n=getOwn(x,e),!t&&!hasProp(b,e)&&n&&!n.inited){if(!(!A.enforceDefine||o&&getGlobal(o)))return p(e)?void 0:g(makeError("nodefine","No define call for "+e,null,[e]));a([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,r){var n,i,o,a,s,d,u=getOwn(A.pkgs,e);if(u&&(e=u),d=getOwn(M,e))return C.nameToUrl(d,t,r);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(n=A.paths,o=(i=e.split("/")).length;0<o;--o)if(s=getOwn(n,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=t||(/^data\:|^blob\:|\?/.test(a)||r?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+a}return A.urlArgs&&!/^blob\:/.test(a)?a+A.urlArgs(e,a):a},load:function(e,t){req.load(C,e,t)},execCb:function(e,t,r,n){return t.apply(n,r)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=i(e);C.completeLoad(t.id)}},onScriptError:function(e){var r=i(e);if(!p(r.id)){var n=[];return eachProp(x,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===r.id)return n.push(t),!0})}),g(makeError("scripterror",'Script error for "'+r.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[r.id]))}}}).require=C.makeRequire(),C}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.3",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,r,n){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=r,r=n):e=[]),o&&o.context&&(a=o.context),i=(i=getOwn(contexts,a))||(contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,r)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require=require||req,req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,r){var n=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return n.type=e.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n},req.load=function(e,t,r){var n,i=e&&e.config||{};if(isBrowser)return(n=req.createNode(i,t,r)).setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=r,i.onNodeCreated&&i.onNodeCreated(n,i,t,r),currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),e.completeLoad(t)}catch(n){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+r,n,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head=head||e.parentNode,dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,r,t){var n,i;"string"!=typeof e&&(t=r,r=e,e=null),isArray(r)||(t=r,r=null),!r&&isFunction(t)&&(r=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){r.push(t)}),r=(1===t.length?["require"]:["require","exports","module"]).concat(r))),!useInteractive||(n=currentlyAddingScript||getInteractiveScript())&&(e=e||n.getAttribute("data-requiremodule"),i=contexts[n.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,r,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,r,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),function(r){function e(e,t,r){this.KEYS={USER_ID:"userId",USER_ROLE:"userRole",USER_NAME:"userName",USER_GROUP_ID:"userGroupId",USER_GROUP_NAME:"userGroupName",USER_PRIORITY:"userPriority",AUTH_TOKEN:"authToken",AUTH_TOKEN_EXPIRED:"tokenExpired",HMI_FILE_LIST_INFO:"hmiFileListExpanded",HMI_CONTROL_PANEL_INFO:"hmiControlPanelExpanded",HIDE_MAIN_SIDEBAR:"hideMainSidebar"},e||n.get(this.KEYS.USER_ID),this.id=e,t||n.get(this.KEYS.USER_ROLE),this.role=t,r||n.get(this.KEYS.AUTH_TOKEN),this.token=r,this.tokenExpired=null}var n=r.Cookies;e.prototype.setAuthToken=function(e,t){t=Math.floor(t/60/60),n.set(this.KEYS.AUTH_TOKEN,e,{expired:t}),r.sessionStorage.setItem(this.KEYS.AUTH_TOKEN,e),r.sessionStorage.setItem(this.KEYS.AUTH_TOKEN_EXPIRED,t),this.token=e},e.prototype.getAuthToken=function(){var e=n.get(this.KEYS.AUTH_TOKEN);return r.sessionStorage.getItem(this.KEYS.AUTH_TOKEN)!=e?(console.error("[SESSION] Session Expired"),null):(this.token!=e&&(this.token=e),this.token)},e.prototype.setAuthTokenExpired=function(e){n.set(this.KEYS.AUTH_TOKEN_EXPIRED,e),r.sessionStorage.setItem(this.KEYS.AUTH_TOKEN_EXPIRED,e),this.tokenExpired=e},e.prototype.getAuthTokenExpired=function(){var e=n.get(this.KEYS.AUTH_TOKEN_EXPIRED);return this.tokenExpired!=e&&(this.tokenExipred=e),this.tokenExipred},e.prototype.setUserId=function(e){n.set(this.KEYS.USER_ID,e),this.id=e},e.prototype.getUserId=function(){var e=n.get(this.KEYS.USER_ID);return this.id!=e&&(this.id=e),this.id},e.prototype.setUserRole=function(e){n.set(this.KEYS.USER_ROLE,e),this.role=e},e.prototype.getUserRole=function(){var e=n.get(this.KEYS.USER_ROLE);return this.role!=e&&(this.role=e),this.role},e.prototype.setUserName=function(e){n.set(this.KEYS.USER_NAME,e),this.name=e},e.prototype.getUserName=function(){var e=n.get(this.KEYS.USER_NAME);return this.name!=e&&(this.name=e),this.name},e.prototype.setUserPriority=function(e){n.set(this.KEYS.USER_PRIORITY,e),this.priority=e},e.prototype.getUserPriority=function(){var e=n.get(this.KEYS.USER_PRIORITY);this.priority!=e&&(this.priority=e);var t=this.priority;return t=Number(t),isNaN(t)?this.priority:t},e.prototype.setUserGroupId=function(e){n.set(this.KEYS.USER_GROUP_ID,e),this.groupId=e},e.prototype.getUserGroupId=function(){var e=n.get(this.KEYS.USER_GROUP_ID);return this.groupId!=e&&(this.groupId=e),this.groupId},e.prototype.setUserGroupName=function(e){n.set(this.KEYS.USER_GROUP_NAME,e),this.groupName=e},e.prototype.getUserGroupName=function(){var e=n.get(this.KEYS.USER_GROUP_NAME);return this.groupName!=e&&(this.groupName=e),this.groupName},e.prototype.clearSession=function(){var e,t=this.KEYS;for(e in t)"locale"!=e&&n.remove(t[e])},r.Session=new e}(window,jQuery),function(a,n){function t(e,t){return e&&"binary"!=t&&(e=e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\\\")),e}var r=new a.xssFilter,i=a.Session,o=i.getAuthToken(),s="application/vnd.samsung.biot.v1+json",d="application/vnd.samsung.biot.v1.page+json",u=n.ajax;function p(){n(".k-dialog.pop-confirm [data-role='commondialog']").each(function(){var e=n(this).data("kendoCommonDialog");e&&"message"==e.options.type&&e.close()})}function l(e){var t=a.I18N,r=n("<div/>").kendoCommonDialog({timeout:0,action:[{text:t.prop("COMMON_BTN_OK"),action:function(e){e.sender.destroy(),e.sender.element.remove()}}]}).data("kendoCommonDialog");return r.message(e),p(),r}n.ajax=function(e){return(e=e||{}).headers||(e.headers={}),e.headers.Accept&&"*/*"!=e.headers.Accept||(e.headers.Accept=s),!e.headers.Authorization&&o&&(e.headers.Authorization="Bearer "+i.getAuthToken()),!e.headers["b.IoT-Version"]&&a.BUILD_DATE&&(e.headers["b.IoT-Version"]=a.BUILD_DATE),e.contentType&&"application/json"!=e.contentType||e.isFileUpload||(e.contentType=s),e.method||(e.method="GET"),"GET"==e.method?(e.data&&(e.data.page||e.data.size)&&0!=e.pagenation&&(e.headers.Accept=d),!e.url||-1==e.url.indexOf("page=")&&-1==e.url.indexOf("size=")||0==e.pagenation||(e.headers.Accept=d),"base64"!=e.dataType&&!e.isImage||(e.dataType="text"),"binary"==e.dataType&&(e.processData=!1)):e.data&&((n.isPlainObject(e.data)||n.isArray(e.data))&&(e.data=JSON.stringify(e.data)),"string"==typeof e.data&&(e.data=r.filter(e.data)),e.isFileUpload&&(e.processData=!1,e.contentType=!1,e.cache=!1)),e.dataFilter=t,u(e)},n.ajaxTransport("+binary",function(l,e,c){if(a.FormData&&(l.dataType&&"binary"==l.dataType||l.data&&(a.ArrayBuffer&&l.data instanceof a.ArrayBuffer||a.Blob&&l.data instanceof Blob)))return{send:function(e,n){var i=new XMLHttpRequest,t=l.url,r=l.type,o=l.async||!0,a=l.responseType||"blob",s=l.data||null,d=l.username||null,u=l.password||null;for(var p in i.addEventListener("load",function(){var r={};if(r[l.dataType]=i.response,400<=i.status){var e=new FileReader;e.onload=function(e){var t=e.target.result;c.responseText=t;try{c.responseJSON=JSON.parse(t)}catch(e){console.error(e)}n(i.status,i.statusText,r,i.getAllResponseHeaders())},e.readAsText(i.response)}else n(i.status,i.statusText,r,i.getAllResponseHeaders())}),i.open(r,t,o,d,u),e)i.setRequestHeader(p,e[p]);i.responseType=a,i.send(s)},abort:function(){c.abort()}}}),n(document).ajaxError(function(e,t){!function(e){if(e&&e.responseText){var t,r=a.I18N,n=a.Util,i=a.MAIN_WINDOW,o=e.responseText;if(-1!=o.indexOf("Permission"))return(t=l(r.prop("COMMON_NOT_AUTHORIZED"))).open();if(-1!=o.indexOf("invalid_token")||-1!=o.indexOf("Full authentication is required"))return(t=l(r.prop("COMMON_SESSION_EXPIRED"))).setActions(0,{action:function(e){e.sender.destroy(),e.sender.element.remove(),p(),i.logout()}}),t.setCloseAction(function(e){e.sender.destroy(),e.sender.element.remove(),p(),i.logout()}),t.open();if(-1!=o.indexOf("Missing authorization header")&&void 0!==i)return(t=l(n.parseFailResponse(e))).setActions(0,{action:function(e){e.sender.destroy(),e.sender.element.remove(),p(),i.goToMenu("signin")}}),t.setCloseAction(function(e){e.sender.destroy(),e.sender.element.remove(),p(),i.goToMenu("signin")}),t.open()}}(t)})}(window,jQuery),function(c,u){function t(r){return r.reduce(function(e,t){return[e[0]+t[0]/r.length,e[1]+t[1]/r.length]},[0,0])}function o(e,t){if(!e)return"-";if(-1!=e.indexOf("AirConditionerOutdoor"))return"SAC Outdoor";if(-1!=e.indexOf("AirConditioner")){if(-1==e.indexOf("Controller"))return"SAC Indoor";var r=e.split(".")[1];if("DMS"==r)return"DMS";if("WirelessDDC"==r)return"Wireless DDC"}else{if(-1!=e.indexOf("Meter"))return"Energy Meter";if(-1!=e.indexOf("Light"))return"Light";if(-1!=e.indexOf("SmartPlug"))return"SmartPlug";if(-1!=e.indexOf("ControlPoint")){if(t)return"Point";if(-1!=e.indexOf("AO"))return"AO";if(-1!=e.indexOf("AI"))return"AI";if(-1!=e.indexOf("AV"))return"AV";if(-1!=e.indexOf("DI"))return"DI";if(-1!=e.indexOf("DO"))return"DO";if(-1!=e.indexOf("DV"))return"DV"}else if(-1!=e.indexOf("Sensor")){if(-1!=e.indexOf("Temperature_Humidity"))return"Temp. & Humi. Sensor";if(-1!=e.indexOf("Temperature"))return"Temperature Sensor";if(-1!=e.indexOf("Humidity"))return"Humidity Sensor";if(-1!=e.indexOf("Motion"))return"Motion Sensor"}else{if(-1!=e.indexOf("Gateway"))return"IoT AP";if(-1!=e.indexOf("Beacon"))return"Beacon";if(-1!=e.indexOf("CCTV"))return"CCTV"}}return e}function a(e,t){return e.mappedType&&"ControlPoint"!=e.mappedType?o(e.mappedType,t):o(e.type,t)}function s(e,t){var r=c.I18N,n=e,i=(n="string"==typeof e?o(e,t):a(e,t)).replace(/ & /g,"_").replace(/ /g,"_").replace(/Temp\./g,"Temperature").replace(/Humi\./g,"Humidity").replace(/\./g,"_");return n=(i=r.prop("FACILITY_DEVICE_TYPE_FILTER_"+i.toUpperCase()))||n}function d(e,t){var r,n,i={},o={};if(t&&(n=t.length,t&&0<n))for(r=0;r<n;r++)i[t[r].id]=t[r].power;if(e&&(n=e.length,e&&0<n))for(r=0;r<n;r++){var a=e[r];"Normal"===a.mode?a.mode="ByPass":"HeatStorage"===a.mode&&(a.mode="HotWater"),o[a.id]=a.mode}return{oper:i,mode:o}}function p(e){var t,r=e.alarms;if(void 0!==e.assets_types_id){r=[];var n,i,o=e.devices,a=o.length;for(n=0;n<a;n++)(i=o[n].dms_devices_alarms)instanceof g.data.ObservableArray&&(i=i.toJSON()),r=r.concat(i)}return r&&r.length&&(r.sort(function(e,t){var r=e.alarms_eventTime>t.alarms_eventTime?0:1;return e.alarms_type<t.alarms_type?-1:r}),(t={}).id=r[0].alarms_id,t.type=r[0].alarms_type,t.name=r[0].alarms_name,t.time=r[0].alarms_eventTime),t}function l(e,t,r){var n=d(e,t),i=n.oper,o=n.mode;if(i||o)return o["AirConditioner.Indoor.General"]&&o["AirConditioner.Indoor.DHW"]?r?o["AirConditioner.Indoor.General"]+", "+o["AirConditioner.Indoor.DHW"]:"On"==i["AirConditioner.Indoor.General"]&&"Off"==i["AirConditioner.Indoor.DHW"]?o["AirConditioner.Indoor.General"]:o["AirConditioner.Indoor.DHW"]:o["AirConditioner.Indoor.General"]&&o["AirConditioner.Indoor.Ventilator"]?r?o["AirConditioner.Indoor.Ventilator"]+", "+o["AirConditioner.Indoor.General"]:o["AirConditioner.Indoor.Ventilator"]:o["AirConditioner.Indoor.DHW"]?o["AirConditioner.Indoor.DHW"]:o["AirConditioner.Indoor.Ventilator"]||o["AirConditioner.Ventilator"]?o["AirConditioner.Indoor.Ventilator"]||o["AirConditioner.Ventilator"]:o["AirConditioner.Indoor.General"]?o["AirConditioner.Indoor.General"]:o["AirConditioner.Outdoor"]?o["AirConditioner.Outdoor"]:void 0}function f(e){var t,r,n=c.I18N,i=e.split(", "),o=i.length,a="";if(1<o)for(r=0;r<o;r++)t=(t=i[r]).toUpperCase(),a+=n.prop("FACILITY_INDOOR_MODE_"+t)||e,r!=o-1&&(a+=", ");else t=e.toUpperCase(),a=n.prop("FACILITY_INDOOR_MODE_"+t)||e;return a}function r(e,t){var r=1.8*e+32;return r=r.toFixed(1),t&&(r+=A.Fahrenheit),r}function n(e,t){var r=(e-32)/1.8;return r=r.toFixed(1),t&&(r+=A.Celsius),r}function i(e,t){var r=c.I18N.prop("ALARM_CODE_"+e,t);return r=r||"-"}function m(e){var t=e.timestamp||e.eventTime;t&&(e.eventTime=y(t).format("LLL"))}function h(e){e.name&&(e.code=e.name,-1!=e.name.indexOf("Rule")?(e.isRule=!0,e.name=e.description):(e.isRule=!1,e.name=i(e.name)))}var g=c.kendo,y=c.moment,T=[],v={AirConditioner:{Indoor:{type:"AirConditioner.Indoor",displayType:"Cassette/Duct"},AHU:{type:"AirConditioner.AHU",displayType:"AHU"},Chiller:{type:"AirConditioner.Chiller",displayType:"DVM Chiller"},EHS:{type:"AirConditioner.EHS",displayType:"EHS"},ERV:{type:"AirConditioner.ERV",displayType:"ERV"},ERVPlus:{type:"AirConditioner.ERVPlus",displayType:"ERV Plus"},FCU:{type:"AirConditioner.FCU",displayType:"FCU"},SFCU:{type:"AirConditioner.SFCU",displayType:"FCU"},DuctFresh:{type:"AirConditioner.DuctFresh",displayType:"Fresh Duct"}},AirConditionerController:{DMS:{type:"AirConditionerController.DMS",displayType:"DMS"},WirelessDDC:{type:"AirConditionerController.WirelessDDC",displayType:"Wireless DDC"}},AirConditionerOutdoor:{type:"AirConditionerOutdoor",displayType:"SAC Outdoor"},Beacon:{type:"Beacon",displayType:"Beacon"},CCTV:{type:"CCTV",displayType:"CCTV"},Peak:{type:"Peak",displayType:"Peak"},ControlPoint:{AI:{type:"ControlPoint.AI",displayType:"AI"},AO:{type:"ControlPoint.AO",displayType:"AO"},AV:{type:"ControlPoint.AV",displayType:"AV"},DI:{type:"ControlPoint.DI",displayType:"DI"},DO:{type:"ControlPoint.DO",displayType:"DO"},DV:{type:"ControlPoint.DV",displayType:"DV"}},DemandController:{type:"DemandController",displayType:"DemandController"},Gateway:{type:"Gateway",displayType:"IoT AP"},Light:{type:"Light",displayType:"Light"},SmartPlug:{type:"SmartPlug",displayType:"SmartPlug"},Meter:{WattHour:{type:"Meter.WattHour",displayType:"WattHour"},Gas:{type:"Meter.Gas",displayType:"Gas"},Water:{type:"Meter.Water",displayType:"Water"},Calori:{type:"Meter.Calori",displayType:"Calori"}},Printer:{type:"Printer",displayType:"Printer"},Sensor:{Humidity:{type:"Sensor.Humidity",displayType:"Humidity Sensor"},Motion:{type:"Sensor.Motion",displayType:"Motion Sensor"},Temperature:{type:"Sensor.Temperature",displayType:"Temperature Sensor"},Temperature_Humidity:{type:"Sensor.Temperature_Humidity",displayType:"Temp. & Humi. Sensor"}},Etc:{type:"Etc",displayType:"Etc"},PointType:{Point:{type:"ControlPoint",displayType:"Point"},Light:{type:"Light",displayType:"Light"},Temperature:{type:"Sensor.Temperature",displayType:"Temperature Sensor"},Humidity:{type:"Sensor.Humidity",displayType:"Humidity Sensor"},Motion:{type:"Sensor.Motion",displayType:"Motion Sensor"},WattHour:{type:"Meter.WattHour",displayType:"WattHour"},Etc:{type:"Etc",displayType:"Etc"}}},_=function(e){var t,r;for(t=e.length-1;0<=t;t--)"AI"==(r=e[t]).displayType&&e.splice(t,1),"DI"==r.displayType&&e.splice(t,1)},E=["AirConditioner.Indoor.General","AirConditioner.Indoor.Ventilator","AirConditioner.Indoor.DHW","AirConditioner.DHW","AirConditioner.Indoor.Room","AirConditioner.Indoor.WaterOutlet","AirConditioner.Indoor.DischargeAir","AirConditioner.Indoor.General.Speed","AirConditioner.Indoor.Ventilator.Speed","AirConditioner.Indoor.General.Direction"],C=["Beacon","CCTV","Gateway","Sensor.Motion","Sensor.Temperature_Humidity","Sensor.Temperature","Sensor.Humidity","Meter.Gas","Meter.WattHour","Light","ControlPoint"],O=function(e){var t=e.representativeStatus||e.dms_devices_representativeStatus;if("Normal"!=t)return t;if("ControlPoint"!==e.mappedType)return"Light"!==e.mappedType||-1==e.type.indexOf("DI")&&-1==e.type.indexOf("DO")?"Normal.On":1==e.controlPoint.value?"Normal.On":"Normal.Off";var r=d(e.modes,e.operations);if(!r)return"-";var n=r.oper;return"On"==n["AirConditioner.Indoor.General"]||"On"==n["AirConditioner.Indoor.DHW"]||"On"==n["AirConditioner.Indoor.Ventilator"]||"On"==n["AirConditioner.Outdoor"]||"On"==n.General?"Normal.On":"Normal.Off"},I=function(e){var t=e.devices;if(t&&t[0]){var r,n,i=[],o=t.length;for(n=0;n<o;n++)r=O(t[n]),i.push(r);return-1!=i.indexOf("Alarm.Critical")?"Alarm.Critical":-1!=i.indexOf("Alarm.Warning")?"Alarm.Warning":"Normal.On"}return"Normal.On"},A={Fahrenheit:"\u2109",Celsius:"\xb0C",Gas:"m\xb3",WattHour:"kWh",Water:"L",Humidity:"%"};function x(e){var t=e.length,r=e[0],n=e[t-1];r[0]==n[0]&&r[1]==n[1]&&e.pop()}function S(e,t){var r,n=T.length;if(0==n&&!t)return!0;for(r=0;r<n;r++)if(-1!=T[r].indexOf(e+"."))return!0;return!1}function D(e,t){for(var r=e[0],n=e[1],i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],d=t[o][1],u=t[a][0],p=t[a][1];n<d!=n<p&&r<(u-s)*(n-d)/(p-d)+s&&(i=!i)}return i}function b(e,t){var r=g.ui.CommonMapView.fn.options.DEFAULT_WIDTH_SIZE,n=g.ui.CommonMapView.fn.options.DEFAULT_HEIGHT_SIZE;return(!e||!t||e<r||t<n)&&(e=r,t=n),[e/2,t/2]}var N=function(e,t,r){if(0==T.length&&!t)return!0;if(-1!=T.indexOf(e))return!0;if(-1!=e.indexOf("AirConditioner")){var n,i=T.length;for(n=0;n<i;n++)if(-1!=T[n].indexOf("AirConditioner."))return!0}return"ControlPoint"==e?S("ControlPoint",t):"Meter"==e?S("Meter",t):"Sensor"==e?S("Sensor",t):"AirConditionerController"==e?S("AirConditionerController",t):!("Sensor.Temperature_Humidity"!=e||r||-1==T.indexOf("Sensor.Temperature")&&-1==T.indexOf("Sensor.Humidity"))},M=["Sensor.Temperature","Sensor.Temperature_Humidity","Sensor.Humidity","Meter.WattHour","Meter.Gas","Meter.Calori","Meter.Water","Beacon","Sensor.Motion","CCTV","Gateway"],P=["Gateway","CCTV","Beacon"],R=function(e){var t="-",r=e.configuration;return r&&r.mobilityType&&(t=(t=r.mobilityType)||"-"),t},L=function(e,t){var r=e.locations;if(void 0!==e.assets_types_id&&e.devices&&e.devices[0]&&(r=e.devices[0].dms_devices_locations),r&&r[0]){var n,i=r.length;for(n=0;n<i;n++)if(r[n].id==t)return r[n]}return{}};c.Util={parseFailResponse:function(e){var t;if(e&&e.responseJSON){var r=e.responseJSON;t=r.code&&r.message?"[Error Code : "+e.responseJSON.code+"] "+e.responseJSON.message:e.responseText}else t=e.responseText?e.responseText:e;return t},sliceNum:function(e){return e<100?("0"+e).slice(-2):100<e?("0"+e).slice(-3):void 0},getCentroid:t,getDisplayType:function(e){if(!e)return"-";if("AirConditioner"==e&&(e="AirConditioner.Indoor"),-1!=E.indexOf(e)){var t=e.split(".");return 3<t.length?"SAC "+t[1]+" ("+t[2]+", "+t[3]+")":2<t.length?"SAC "+t[1]+" ("+t[2]+")":"SAC Indoor  ("+t[1]+")"}if("General"==e)return"Light";if("ControlPoint"==e)return"Point";if("Meter"==e)return"Energy Meter";if("Unknown"==e)return"Unknown";var r,n,i=e.split(".");if(r=v[i[0]]){if(!(1<i.length))return r.displayType;if(n=r[i[1]])return n.displayType}return e},getDisplayClassType:function(e){if(!e)return"";if(void 0!==e.assets_types_name)return e.assets_types_name.toLowerCase();var t,r;if(!(t="object"==typeof e?(r=e.mappedType,e.type):e))return"";if(-1!=t.indexOf("AirConditionerOutdoor"))return"Outdoor";if(-1!=t.indexOf("AirConditioner"))return"Indoor";if(-1!=t.indexOf("Meter")||r&&-1!=r.indexOf("Meter"))return"Meter";if(-1!=t.indexOf("Light")||r&&-1!=r.indexOf("Light"))return"Light";if(-1!=t.indexOf("SmartPlug"))return"SmartPlug";if(-1!=t.indexOf("Temperature")||-1!=t.indexOf("Humidity")||r&&-1!=r.indexOf("Temperature")||r&&-1!=r.indexOf("Humidity"))return"Temp";if(-1!=t.indexOf("Motion")||r&&-1!=r.indexOf("Motion"))return"Motion";if(-1!=t.indexOf("ControlPoint")){if(-1!=t.indexOf("AO"))return"AO";if(-1!=t.indexOf("AI"))return"AI";if(-1!=t.indexOf("AV"))return"AV";if(-1!=t.indexOf("DI"))return"DI";if(-1!=t.indexOf("DO"))return"DO";if(-1!=t.indexOf("DV"))return"DV"}else{if(-1!=t.indexOf("Gateway"))return"Gateway";if(-1!=t.indexOf("Beacon"))return"Beacon";if(-1!=t.indexOf("CCTV"))return"CCTV";if(-1!=t.indexOf("Asset"))return"Asset"}return t},getDetailDisplayType:o,getDetailDisplayTypeDevice:a,getDetailDisplayTypeDeviceI18N:s,getOriginalType:function(e){var t,r,n,i;if(e)for(t in v){if((n=v[t]).displayType&&n.displayType==e)return n.type;for(r in n)if((i=n[r]).displayType&&i.displayType==e)return i.type}},getIndoorType:function(e){if(!e||!e.modes)return"";var t,r,n=e.modes,i=n.length,o={};for(r=0;r<i;r++)o[(t=n[r]).id]=t.mode;return o["AirConditioner.Indoor.General"]&&o["AirConditioner.Indoor.Ventilator"]?"AirConditioner.Indoor.Ventilator":o["AirConditioner.Indoor.DHW"]?"AirConditioner.Indoor.DHW":o["AirConditioner.Indoor.General"]?"AirConditioner.Indoor.General":o["AirConditioner.Indoor.Ventilator"]?"AirConditioner.Indoor.Ventilator":""},getDeviceTypeList:function(e,t){var r,n,i,o,a=[];if(e){if(e&&u.isArray(e)){var s,d=e.length;for(s=0;s<d;s++)if((i=v[e[s]])&&i.type&&i.displayType)N(i.type)&&a.push(i);else if(i)for(r in i)(o=i[r])&&o.type&&o.displayType&&N(o.type)&&a.push(o)}else if((i=v[e])&&i.type&&i.displayType)N(i.type)&&a.push(i);else if(i)for(r in i)(o=i[r])&&o.type&&o.displayType&&N(o.type)&&a.push(o)}else for(r in v)if((i=v[r])&&i.type&&i.displayType)N(i.type)&&a.push(i);else if(i)for(n in i)(o=i[n])&&o.type&&o.displayType&&N(o.type)&&a.push(o);return t&&_(a),a},getDisplayMode:l,getDisplayModeI18N:function(e,t,r,n){var i=l(e,t,r);return i=f(i),n&&(i=(i=i.split(", ")).join(n)),i},getFahrenheit:r,getCelsius:n,getTemperature:function(e,t){return"Fahrenheit"==c.GlobalSettings.getTemperature().unit?r(e,t):n(e,t)},getStatus:function(e){var t=null,r=e.mappedType,n=p(e);if((t=e.type)&&!n){if(!n&&-1!=t.indexOf("ControlPoint")&&r&&-1!=C.indexOf(r))return O(e);if(-1!=C.indexOf(t))return O(e)}if(void 0!==e.assets_types_id&&!n)return I(e);var i,o=d(e.modes,e.operations),a=o.oper;return n?(i=n.name,t=n.type,void 0!==e.assets_types_id?"Dev_10002"==i?"Alarm.Critical":"Dev_10003"==i?"Alarm.Critical":"Dev_10004"==i?"Alarm.Warning":"Critical"==t?"Alarm.Critical":"Alarm.Warning":"Critical"===n.type?"Alarm.Critical":"Alarm.Warning"):o?"On"==a["AirConditioner.Indoor.General"]||"On"==a["AirConditioner.Indoor.DHW"]||"On"==a["AirConditioner.Indoor.Ventilator"]||"On"==a["AirConditioner.Outdoor"]||"On"==a.General?"Normal.On":"Normal.Off":"-"},getRecentAlarm:p,CHAR:A,parseLocation:function(e){if(!e)return{};var t=e.split(", "),r=t[0]?t[0]:"",n=t[1]?t[1]:"",i="";return n&&(i=-1!=n.indexOf("B")?"B":-1!=n.indexOf("F")?"F":"None",n=n.replace(i,"")),{foundation_space_buildings_name:r,foundation_space_floors_name:n,foundation_space_floors_type:i,foundation_space_zones_name:t[2]?t[2]:""}},getAlarmDescription:i,setAlarmEventTime:m,setAlarmDescription:h,setAlarmData:function(e){var t,r;m(e),h(e),(r=(t=e).location)?"object"==typeof r&&(t.location=r.description,t.foundation_space_buildings_id=r.foundation_space_buildings_id,t.foundation_space_floors_id=r.foundation_space_floors_id,t.foundation_space_zones_id=r.foundation_space_zones_id):t.location="-"},convertAmPm:function(e){if(-1!=e.indexOf("AM")||-1!=e.indexOf("PM"))return e;var t,r,n,i=e.split(":");return r=i[0],n=i[1],r<=11&&0<=r?t="AM":12<=r&&r<=23&&(t="PM",12<r&&(r-=12)),(r+"").length<2&&(r="0"+r),t+" "+r+":"+n},convertTimeFormat:function(e){return y(e).format("HH:mm:ss")},convertFullHour:function(e){if(-1==e.indexOf("AM")&&-1==e.indexOf("PM"))return e;var t=(e=e.split(" "))[0],r=e[1];return r=r.split(":"),"PM"==t&&(r[0]=Number(r[0])+12),r[0]+":"+r[1]+":00"},convertDateFormat:function(e){return y(e).format("L").replace(/\./g,"-")},convertNumberFormat:function(e){var t=null;return e?(t=Number(e),null==e?e:isNaN(t)?e:-1!=t.toString().toLowerCase().indexOf("e")&&"string"==typeof e?2!=e.split(".").length?e:.1<=Number("0."+e.split(".")[1])?e.split(".")[0]+"."+e.split(".")[1][0]:e.split(".")[0]:0<t?.09999999999999432<=t-Math.floor(t)?Math.floor(10*t)/10:Math.floor(t):.09999999999999432<=(t*=-1)-Math.floor(t)?Math.floor(10*t)/10*-1:0===Math.floor(t)?0:-1*Math.floor(t)):e},removeSameLastPoint:x,getZoneCenterCoordinate:function(e){return e=function(e){if(e&&e[0])return e=e[0],x(e)}(e),t(e)},setAutoLocation:function(e,t){if(e){var r,n=c.MAIN_WINDOW,i=n.getCurrentFloor(),o=i.building,a=i.floor,s=!1;if(void 0!==e.assets_types_id&&(s=!0),s?(r=e.location)||(e.location={},r=e.location):(e.locations||(e.locations=[]),e.locations[0]||e.locations.push({}),(r=e.locations[0]).id||(r.id="Fixed")),r.foundation_space_buildings_id||o.id==n.FLOOR_NAV_BUILDING_TOTAL_ID||(r.foundation_space_buildings_id=o.id),r.foundation_space_floors_id||a.id==n.FLOOR_NAV_FLOOR_ALL_ID||(r.foundation_space_floors_id=a.id),null===r.foundation_space_zones_id||void 0===r.foundation_space_zones_id){var d,u,p={type:"Point",coordinates:null},l=t;if(!l)return void console.error("there is no map widget it's not possible to get center zone.");r.geometry||e.nameDisplayCoordinate||(d=l.getCenter(),p.coordinates=d,r.geometry=p),r.foundation_space_floors_id==a.id?(u=l.getCenterZoneId())&&(r.foundation_space_zones_id=Number(u)):(d=l.getCenter(),p.coordinates=d,r.geometry=p),s||(r.foundation_space_zones_id=0)}}},getInstalledTypesFromServer:function(){return u.ajax({url:"/dms/devices/installedTypes"}).then(function(e){if(e&&e.dms_devices_types){T=e.dms_devices_types;var t,r,n,i=e.dms_devices_mappedTypes;if(i&&0<i.length)for(r=i.length,t=0;t<r;t++)n=i[t],-1==T.indexOf(n)&&T.push(n);T.sort()}})},isInstalledType:N,isSupportEnergyDistributionType:function(e){var t,r=["AirConditioner.Indoor.Cassette1Way","AirConditioner.Indoor.Cassette2Way","AirConditioner.Indoor.Cassette4Way","AirConditioner.Indoor.Cassette360","AirConditioner.Indoor.Ceiling","AirConditioner.Indoor.Console","AirConditioner.Indoor.Bottom","AirConditioner.Indoor.PAC","AirConditioner.Indoor.AHU","AirConditioner.Indoor.Duct","AirConditioner.Indoor.DuctFresh","AirConditioner.Indoor.FCU.Cassette1Way","AirConditioner.Indoor.FCU.Cassette2Way","AirConditioner.Indoor.FCU.Cassette4Way","AirConditioner.Indoor.FCU.Cassette360"],n=r.length;for(t=0;t<n;t++)if(e==r[t])return!0;return!1},getInstalledTypeList:function(){return T},getHistoryOperation:function(e){var t=c.I18N.prop("FACILITY_HISTORY_OPERATION_"+e);return t=t||e},getHistoryOperationValue:function(e,t){var r=c.I18N.prop(e,t);return r=r||e},getFloorName:function(e){var t=e.name,r=e.type;return"F"==r?t+=r:t="B"==r?r+t:t||"-",t},getQueryFromFloor:function(e,t,r,n){var i="?",o=c.MAIN_WINDOW;if(e){var a=e.building.id,s=e.floor.id;r?a&&a!=o.FLOOR_NAV_BUILDING_TOTAL_ID&&s&&s==o.FLOOR_NAV_FLOOR_ALL_ID&&(i+="foundation_space_buildings_id="+a+"&"):a&&a!=o.FLOOR_NAV_BUILDING_TOTAL_ID&&(i+="foundation_space_buildings_id="+a+"&"),t||s&&s!=o.FLOOR_NAV_FLOOR_ALL_ID&&(i+="foundation_space_floors_id="+s+"&")}return n&&0<n.length&&(i+="attributes="+n.join(",")),i},getGeneralType:function(e){return e?-1!=e.indexOf("AirConditioner.")?"AirConditioner.Indoor":e:""},getSmartPlugStatus:function(e){return 0<e.controlPoint.value?"Normal.On":"Normal.Off"},getNormalStatus:function(e){var t=e.type,r=e.mappedType;if(t&&-1!=t.indexOf("ControlPoint")&&(-1!=t.indexOf("AO")||-1!=t.indexOf("AI")||-1!=t.indexOf("DI")||-1!=t.indexOf("DO"))&&r&&-1!=r.indexOf("Light")&&e.controlPoint&&e.controlPoint.value)return 0<e.controlPoint.value?"Normal.On":"Normal.Off";var n=d(e.modes,e.operations);if(!n)return"-";var i=n.oper;return"On"==i["AirConditioner.Indoor.General"]||"On"==i["AirConditioner.Indoor.DHW"]||"On"==i["AirConditioner.Indoor.Ventilator"]||"On"==i["AirConditioner.Outdoor"]||"On"==i.General?"Normal.On":"Normal.Off"},getRepresentativeStatus:O,getSystemLogOperationType:function(e,t){var r=c.I18N.prop("SYSTEM_LOG_TYPE_"+e,t);return r=r||"-"},isOnlyNormalType:function(e){var t=e.type;return t=e.mappedType||t,void 0!==e.assets_types_id||-1!=M.indexOf(t)},getAssetStatus:I,isNetworkDevice:function(e){if(void 0!==e.assets_types_id)return!0;var t=e.type;return!(!t||-1==P.indexOf(t))},getModeToI18N:f,getPositionType:function(e){return void 0!==e.assets_types_id?e.mobilityType:R(e)},getBeaconPositionType:R,getBeaconTypeLocation:function(e,t){var r;if("Fixed"==t)r=t;else{if("Movable"!=t)return{};r="Measured"}return L(e,r)},getBeaconLocation:L,getStatusI18N:function(e){var t=c.I18N,r=e.replace(/\(/g,"_").replace(/\)/g,"");return r=(r=t.prop("FACILITY_DEVICE_STATUS_POPUP_"+r.toUpperCase()))||e},decodeHtml:function(e){return e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},getScheduleMode:function(e,t){var r="",n="",i=c.I18N;return-1!=e.indexOf("Ventilator")?r="("+i.prop("FACILITY_DEVICE_TYPE_VENTILATOR")+")":-1!=e.indexOf("DHW")&&(r="("+i.prop("FACILITY_DEVICE_TYPE_DHW")+")"),n+='<dd class="dotText"><div class="tb"><div class="tbc"><span>'+(e=s(e)+r+" "+i.prop("FACILITY_DEVICE_SAC_INDOOR_MODE"))+'</span> :&nbsp;</div><div class="tbc">'+(t=i.prop("FACILITY_INDOOR_MODE_"+t.toUpperCase()))+"</div></div></dd>"},getScheduleOperation:function(e,t){var r="",n="",i=c.I18N;return n+='<dd class="dotText"><div class="tb"><div class="tbc"><span>'+(e=(e="General"==e?s("Light"):(-1!=e.indexOf("Ventilator")?r="("+i.prop("FACILITY_DEVICE_TYPE_VENTILATOR")+")":-1!=e.indexOf("DHW")&&(r="("+i.prop("FACILITY_DEVICE_TYPE_DHW")+")"),s(e)))+r+" "+i.prop("FACILITY_INDOOR_CONTROL_POWER"))+'</span> :&nbsp;</div><div class="tbc">'+(t=i.prop("FACILITY_DEVICE_STATUS_"+t.toUpperCase()))+"</div></div></dd>"},getScheduleLight:function(e){var t=c.I18N,r="";return r+='<dd class="dotText"><div class="tb"><div class="tbc"><span>'+t.prop("FACILITY_DEVICE_TYPE_LIGHT")+" "+t.prop("FACILITY_DEVICE_LIGHT_BRIGHTNESS")+'</span> :&nbsp;</div><div class="tbc">'+e+"</div></div></dd>"},getScheduleTemperatures:function(e,t){var r=c.GlobalSettings.getTemperature().unit,n="",i="",o=c.I18N;return-1!=e.indexOf("Room")?i="("+o.prop("FACILITY_INDOOR_SET_TEMPERATURE")+")":-1!=e.indexOf("DHW")?i="("+o.prop("FACILITY_INDOOR_DHW_SET_TEMPERATURE")+")":-1!=e.indexOf("WaterOutlet")&&(i="("+o.prop("FACILITY_INDOOR_WATER_OUT_SET_TEMP")+")"),n+='<dd class="dotText"><div class="tb"><div class="tbc"><span>'+(e=s(e)+i)+'</span> :&nbsp;</div><div class="tbc">'+t+"<span>"+A[r]+"</span></div></div></dd>"},getValueFilteredForXSS:function(e,t){return"string"==typeof e&&(void 0===t||0==t?e=(e=e.replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"):void 0!==t&&1==t&&(e=e.replace(/\<|\>|\"|\'|\%|\;|\(|\)|\&|\+|\-/g,""))),e},getEnergyMeterTypeList:function(){var e,t,r=c.I18N,n=[{text:r.prop("ENERGY_METER_TYPE_WATTHOUR"),value:"Meter.WattHour"},{text:r.prop("ENERGY_METER_TYPE_GAS"),value:"Meter.Gas"},{text:r.prop("ENERGY_METER_TYPE_WATER"),value:"Meter.Water"}];for(e=n.length-1;0<=e;e--)t=(t=n[e]).value,N(t,!0)||n.splice(e,1);return n},getControllableDeviceTypeDataSource:function(){var e,t,r=c.I18N,n=[{text:r.prop("FACILITY_DEVICE_TYPE_SAC_INDOOR"),value:"AirConditioner."},{text:r.prop("FACILITY_DEVICE_TYPE_POINT"),value:"ControlPoint"},{text:r.prop("FACILITY_DEVICE_TYPE_BLE_BEACON"),value:"Beacon"},{text:r.prop("FACILITY_DEVICE_TYPE_CCTV"),value:"CCTV"},{text:r.prop("FACILITY_DEVICE_TYPE_IOT_GATEWAY"),value:"Gateway"},{text:r.prop("FACILITY_DEVICE_TYPE_LIGHT"),value:"Light"}];for(e=n.length-1;0<=e;e--)t=(t=n[e]).value,N(t,!0)||n.splice(e,1);return n},getTotalDeviceTypeDataSource:function(){var e,t,r=c.I18N,n=[{text:r.prop("FACILITY_DEVICE_TYPE_SAC_INDOOR"),value:"AirConditioner."},{text:r.prop("FACILITY_DEVICE_TYPE_SAC_OUTDOOR"),value:"AirConditionerOutdoor"},{text:r.prop("FACILITY_DEVICE_TYPE_POINT"),value:"ControlPoint"},{text:r.prop("FACILITY_DEVICE_TYPE_ENERGY_METER"),value:"Meter"},{text:r.prop("FACILITY_DEVICE_TYPE_TEMPERATURE_SENSOR"),value:"Sensor.Temperature"},{text:r.prop("FACILITY_DEVICE_TYPE_HUMIDITY_SENSOR"),value:"Sensor.Humidity"},{text:r.prop("FACILITY_DEVICE_TYPE_TEMP_AND_HUMIDITY_SENSOR"),value:"Sensor.Temperature_Humidity"},{text:r.prop("FACILITY_DEVICE_TYPE_MOTION_SENSOR"),value:"Sensor.Motion"},{text:r.prop("FACILITY_DEVICE_TYPE_BLE_BEACON"),value:"Beacon"},{text:r.prop("FACILITY_DEVICE_TYPE_CCTV"),value:"CCTV"},{text:r.prop("FACILITY_DEVICE_TYPE_IOT_GATEWAY"),value:"Gateway"},{text:r.prop("FACILITY_DEVICE_TYPE_LIGHT"),value:"Light"},{text:r.prop("FACILITY_DEVICE_TYPE_PRINTER"),value:"Printer"}];for(e=n.length-1;0<=e;e--)t=(t=n[e]).value,N(t,!0,!0)||n.splice(e,1);return n},getter:function(e,t){return function(e){var t,r,n,i=this,o=e.split("."),a=o.length;for(t=0;t<a;t++){if(-1!=(r=(e=o[t]).indexOf("["))?(n=e.substring(r+1,e.length-1),void 0!==(i=i[e=e.substring(0,r)])&&(i=i[n])):i=i[e],void 0===i)return null;if(t==a-1)return i}}.call(e,t)},setter:function(e,t,r){(function(e,t){var r,n,i,o=this,a=e.split("."),s=a.length;for(r=0;r<s;r++)if(i=null,-1!=(n=(e=a[r]).indexOf("["))){if(i=e.substring(n+1,e.length-1),void 0===o[e=e.substring(0,n)]&&(o[e]=[]),o=o[e],r==s-1)return void(o[i]=t);void 0===o[i]&&(o[i]={}),o=o[i]}else{if(!(r<s-1))return void(o[e]=t);void 0===o[e]&&(o[e]={}),o=o[e]}}).call(e,t,r)},getFloorDataWithImage:function(e){var t=new u.Deferred,r=c.MAIN_WINDOW,n={};return u.ajax({url:"/foundation/space/floors/"+e}).done(function(e){n=e}).fail(function(e){t.reject(e)}).always(function(){u.ajax({url:"/foundation/space/floors/"+e+"/image",dataType:"binary"}).fail(function(){n.image=null,n.imageWidth=0,n.imageHeight=0,t.resolve(n)}).done(function(e){(n.image=e)?(n.imageUrl=URL.createObjectURL(e),r.setFloorImageInfo({floor:n}).always(function(){t.resolve(n)})):(n.imageWidth=0,n.imageHeight=0,t.resolve(n))})}),t.promise()},refineDataFieldsFromModel:function(e,t){var r,n=(new t).fields;for(r in e)void 0===n[r]?delete e[r]:void 0===e[r]&&delete e[r];return e},isPointInPolygon:D,getCenterMap:b,getCenterZoneId:function(e,t){t=t||b();var r,n,i,o=0,a=e.length;for(i=0;i<a;i++)if(r=(n=e[i]).geometry.coordinates[0],D(t,r)){o=n.id;break}return o},isValidColor:function(e){return/^#([A-Fa-f0-9]{6}$)/.test(e)},getImageUrl:function(e){return"../../src/main/resources/static-dev/images/"+e},getNewGUID:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getChartOptionsForFiveChartSection:function(e,t){var r,n,i,o,a,s,d;if(10<e){for(o=(n=e.toString())[0],(a=n[1])<5?a=5:(a=0,o=(Number(o)+1).toString()),s=Number(10*o+a),r=0;r<Math.floor(n).toString().length-2;r++)s*=10;s<100&&50<s&&(s=100),s<50&&(s=50)}else s=e;if(t<0)if(t<-10)for(o=(i=t.toString())[1],(a=i[2])<5?a=5:(a=0,o=(Number(o)+1).toString()),d=-1*Number(10*o+a),r=0;r<i.length-3;r++)d*=10;else d=-10;else d=0;return{newMax:s,newMin:d,newMajorUnit:(s-d)/5}},getStringLength:function(e){return null!=e?[].concat(function(e){var t=Array(e.length);if(Array.isArray(e)){for(var r=0;r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(e)).length:e},addBuildDateQuery:function(e){return e&&(e+="?v="+c.BUILD_DATE),e}}}(window,jQuery),function(e,i){var r,o=["open","receive","close","error"],n=e.Session,t=e.SERVER_HOST,a="http:"==e.location.protocol?"ws://":"wss://",s="http:"==e.location.protocol?"80":"443",d=!1,u={};!function(){var e,t,r,n=o.length;for(e=0;e<n;e++)r={publish:(t=i.Callbacks()).fire,subscribe:t.add,unsubscribe:t.remove,empty:t.empty},u[o[e]]=r}(),t="localhost"==t?e.location.hostname:t,a+=t+":"+s+"/edge/notification",e.CommonWebSocket={connect:function(){(r=new WebSocket(a)).onopen=function(e){if(!d){var t=n.getAuthToken();r.send(JSON.stringify({access_token:t})),d=!0}u.open.publish(e)},r.onmessage=function(e){if(e.data){var t=JSON.parse(e.data);console.info(t),u.receive.publish(t)}},r.onclose=function(e){console.info("WEBSOCKET::CLOSED"),u.close.publish(e)},r.onerror=function(e){u.error.publish(e)}},on:function(e,t){var r=u[e];r&&i.isFunction(t)?r.subscribe(t):console.error("there is no eventType or callback argument is not function")},off:function(e,t){var r=u[e];r&&i.isFunction(t)?r.unsubscribe(t):r?r.empty():console.error("there is no eventType or callback argument is not function")},clear:function(e,t){var r=u[e];r&&i.isFunction(t)?r.empty():console.error("there is no eventType or callback argument is not function")},send:function(e){"string"!=typeof e&&(e=JSON.stringify(e)),r.send(e)}}}(window,jQuery);