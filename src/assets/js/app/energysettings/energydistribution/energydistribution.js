define("energysettings/energydistribution/energydistribution",["energysettings/core"],function(){window.MAIN_WINDOW.disableFloorNav(!0);var n,e,a,t,i,o,r,u,l,d,s,b,m,g,c,f,p,v;n=window.I18N,e=new window.CommonLoadingPanel,a="disabled",t=/^\d+(\.\d+)?$/,i=$("#energy-setting-tab"),o=$(".sac-energy-distribution-container"),r=o.find(".radio-list.distribution"),u=o.find(".radio-list.engine"),l=$("#common-distribution-rate"),d=$("#popup-sac-energy-distribution-message"),s=null,b=o.find(".content.btn-util").find(".k-button[event-name=save]"),m={energyDistributionEnabled:null,energyDistributionCommonRate:null,energyDistributionEngine:null},g=function(){m={energyDistributionEnabled:null,energyDistributionCommonRate:null,energyDistributionEngine:null},e.open(),$.ajax({url:"/energy/distribution/setting"}).done(function(n){var e,t=null;for(e in m)t=null===n[e]||void 0===n[e]?null:n[e],m[e]=t}).fail(function(n){s.message("Error: "+n.status),s.open()}).always(function(){e.close(),b.data("kendoButton").enable(!1),c()})},c=function(){m.energyDistributionEnabled?(l.prop("disabled",!1),l.removeClass(a)):(l.prop("disabled",!0),l.addClass(a));var n,e=null;if(null!==m.energyDistributionEnabled)r.find(".k-radio[data-value="+m.energyDistributionEnabled+"]").prop("checked",!0);else for(e=r.find(".k-radio"),n=0;n<e.length;n++)e.eq(n).prop("checked",!1);l.val(m.energyDistributionCommonRate.toFixed(1));for(var t,i=u.find("input.k-radio"),o=0;o<i.length;o++)(t=i.eq(o)).attr("data-value")==m.energyDistributionEngine?t.prop("checked",!0):t.prop("checked",!1)},f=function(){var e,t,i;r.on("change","input.k-radio",function(n){console.info("CHANGE::\ubd84\ubc30"),b.data("kendoButton").enable(!0),e=$(n.target),t=e.attr("name"),i="true"===e.attr("data-value"),m[t]=i,l.prop("disabled",!i),i?l.removeClass(a):l.addClass(a),v()}),l.on("keyup",function(n){console.info("CHANGE::\ubd84\ubc30\uc728"),b.data("kendoButton").enable(!0),e=$(n.target),t=e.attr("data-name"),i=e.val(),m[t]=Number(i),v()}),u.on("change","input.k-radio",function(n){console.info("CHANGE::\uc5d4\uc9c4"),b.data("kendoButton").enable(!0),e=$(n.target),t=e.attr("name"),i=e.attr("data-value"),m[t]=i,v()}),b.on("click",p)},p=function(){var n=m.energyDistributionCommonRate;""!=n&&null!==n||(m.energyDistributionCommonRate=0),m.energyDistributionCommonRate=Number(m.energyDistributionCommonRate),console.info(m),e.open(),$.ajax({url:"/energy/distribution/setting",method:"PATCH",data:m}).done(function(){}).fail(function(n){s.message("Error: "+n.status),s.open()}).always(function(){e.close(),g()})},v=function(){var n=b.data("kendoButton"),e=m.energyDistributionEnabled,t=m.energyDistributionEngine,i=!l.hasClass("k-invalid"),o=l.val();null!==e&&null!==t&&i?e&&(null!==o&&""!=o||n.enable(!1)):n.enable(!1)},i.kendoCommonTabStrip(),s=d.kendoCommonDialog().data("kendoCommonDialog"),b.kendoButton(),l.kendoCommonValidator({minLength:1,maxLength:7,rules:{maxNumber:function(n){return!(100<Number(n.val()))},minNumber:function(n){return!(Number(n.val())<0)},invalidNumber:function(n){var e=n.val();return!e||e.match(t)},decimalCount:function(n){var e=String(n.val()).split(".");return!(1<e.length&&1<e[1].length)}},messages:{maxNumber:n.prop("COMMON_INVALID_VALUE"),minNumber:n.prop("COMMON_INVALID_VALUE"),invalidNumber:n.prop("COMMON_INVALID_VALUE"),decimalCount:n.prop("COMMON_INVALID_VALUE")}}),f(),g()});